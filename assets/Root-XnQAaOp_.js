var $e=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var _=(e,t,n)=>($e(e,t,"read from private field"),n?n.call(e):t.get(e)),fe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},me=(e,t,n,s)=>($e(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);var pe=(e,t,n)=>($e(e,t,"access private method"),n);import{r as c,c as wt,R as y,j as a,_ as hn}from"./index-33dwo9K-.js";import{s as Lt}from"./index-Pxv6pUZk.js";import{b as Ce,c as ye,t as qe,n as gn,p as pn,q as xn,r as Cn}from"./LinkCard-ffF9KqDX.js";import{u as Mt,a as vn,b as bn,c as Fe,d as En,e as it,f as yn,g as wn,h as Rn,i as Pt,M as Sn,j as Ve,k as jn,l as _n,m as Tn,s as ct,n as Q,o as Xe,E as On,p as kn}from"./Comments-_b2aJDgV.js";import{p as Pe,j as Nn,I as In,A as lt,k as An}from"./utils-CMuSmZ65.js";import{a as re,c as Te}from"./helper-wV2Sx7aH.js";import{j as Ln,e as Rt,g as Je,I as Dt}from"./Gallery-8bUGafna.js";import{S as Mn,n as Ft,l as Vt,q as Pn,r as Dn,d as Fn,F as zt,t as Vn}from"./Markdown-wJ0uSamB.js";import{g as zn}from"./mutation-FPHN5wz8.js";import{u as ut,j as U,a as Wt,s as Wn,h as Un}from"./Divider-Oi9OD1qc.js";import{A as Bn}from"./Collapse-8BoKkbA5.js";import{a as $n,e as qn,g as Hn,u as Kn,h as Gn,f as Yn,i as St,m as De,S as jt,M as Qn}from"./spring-v-SIdMkd.js";function Ze(e){const t=$n(()=>qn(e)),{isStatic:n}=c.useContext(Hn);if(n){const[,s]=c.useState(e);c.useEffect(()=>t.on("change",s),[])}return t}function Xn(e,t){const n=Ze(t()),s=()=>n.set(t());return s(),Kn(()=>{const r=()=>Yn.update(s,!1,!0),o=e.map(i=>i.on("change",r));return()=>{o.forEach(i=>i()),Gn(s)}}),n}function Jn(e,...t){const n=e.length;function s(){let r="";for(let o=0;o<n;o++){r+=e[o];const i=t[o];i&&(r+=St(i)?i.get():i)}return r}return Xn(t.filter(St),s)}var le,ne,q,se,xe,Le,_e,et,At,Zn=(At=class extends Mn{constructor(t,n){super();fe(this,xe);fe(this,_e);fe(this,le,void 0);fe(this,ne,void 0);fe(this,q,void 0);fe(this,se,void 0);me(this,ne,void 0),me(this,le,t),this.setOptions(n),this.bindMethods(),pe(this,xe,Le).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const n=this.options;this.options=_(this,le).defaultMutationOptions(t),Ln(n,this.options)||_(this,le).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,q),observer:this}),(s=_(this,q))==null||s.setOptions(this.options),n!=null&&n.mutationKey&&this.options.mutationKey&&Rt(n.mutationKey)!==Rt(this.options.mutationKey)&&this.reset()}onUnsubscribe(){var t;this.hasListeners()||(t=_(this,q))==null||t.removeObserver(this)}onMutationUpdate(t){pe(this,xe,Le).call(this),pe(this,_e,et).call(this,t)}getCurrentResult(){return _(this,ne)}reset(){var t;(t=_(this,q))==null||t.removeObserver(this),me(this,q,void 0),pe(this,xe,Le).call(this),pe(this,_e,et).call(this)}mutate(t,n){var s;return me(this,se,n),(s=_(this,q))==null||s.removeObserver(this),me(this,q,_(this,le).getMutationCache().build(_(this,le),this.options)),_(this,q).addObserver(this),_(this,q).execute(t)}},le=new WeakMap,ne=new WeakMap,q=new WeakMap,se=new WeakMap,xe=new WeakSet,Le=function(){var n;const t=((n=_(this,q))==null?void 0:n.state)??zn();me(this,ne,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},_e=new WeakSet,et=function(t){Ft.batch(()=>{var n,s,r,o,i,f,u,b;if(_(this,se)&&this.hasListeners()){const h=_(this,ne).variables,x=_(this,ne).context;(t==null?void 0:t.type)==="success"?((s=(n=_(this,se)).onSuccess)==null||s.call(n,t.data,h,x),(o=(r=_(this,se)).onSettled)==null||o.call(r,t.data,null,h,x)):(t==null?void 0:t.type)==="error"&&((f=(i=_(this,se)).onError)==null||f.call(i,t.error,h,x),(b=(u=_(this,se)).onSettled)==null||b.call(u,void 0,t.error,h,x))}this.listeners.forEach(h=>{h(_(this,ne))})})},At);function es(e,t){const n=Vt(t),[s]=c.useState(()=>new Zn(n,e));c.useEffect(()=>{s.setOptions(e)},[s,e]);const r=c.useSyncExternalStore(c.useCallback(i=>s.subscribe(Ft.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=c.useCallback((i,f)=>{s.mutate(i,f).catch(ts)},[s]);if(r.error&&Pn(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}function ts(){}typeof window<"u"&&!window.global&&(window.global=typeof wt>"u"?window:wt);var Ut=Object.defineProperty,ns=Object.getOwnPropertyDescriptor,ss=Object.getOwnPropertyNames,rs=Object.prototype.hasOwnProperty,os=(e,t)=>{for(var n in t)Ut(e,n,{get:t[n],enumerable:!0})},_t=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ss(t))!rs.call(e,r)&&r!==n&&Ut(e,r,{get:()=>t[r],enumerable:!(s=ns(t,r))||s.enumerable});return e},as=(e,t,n)=>(_t(e,t,"default"),n&&_t(n,t,"default")),is=()=>{try{return!1}catch{}return!1},cs=()=>{try{return!0}catch{}return!1},Tt=new Set,ls=(e,t,n)=>{const s=is()||cs(),r=n??e;Tt.has(r)||s||(Tt.add(r),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.
${t}`))},us={Expired:"expired",Failed:"failed"};new Proxy(us,{get(e,t,n){return ls("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(e,t,n)}});const ds="Clerk: You must wrap your application in a <ClerkProvider> component.",fs=e=>`Clerk: You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`,ms=e=>t=>{try{return y.Children.only(e)}catch{throw new Error(fs(t))}},hs=(e,t)=>(e||(e=t),typeof e=="string"&&(e=y.createElement("button",null,e)),e),gs=e=>(...t)=>{if(e&&typeof e=="function")return e(...t)},ue=()=>{},B=ue(),Me=Object,g=e=>e===B,G=e=>typeof e=="function",oe=(e,t)=>({...e,...t}),ps=e=>G(e.then),Ie=new WeakMap;let xs=0;const Se=e=>{const t=typeof e,n=e&&e.constructor,s=n==Date;let r,o;if(Me(e)===e&&!s&&n!=RegExp){if(r=Ie.get(e),r)return r;if(r=++xs+"~",Ie.set(e,r),n==Array){for(r="@",o=0;o<e.length;o++)r+=Se(e[o])+",";Ie.set(e,r)}if(n==Me){r="#";const i=Me.keys(e).sort();for(;!g(o=i.pop());)g(e[o])||(r+=o+":"+Se(e[o])+",");Ie.set(e,r)}}else r=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return r},X=new WeakMap,He={},Ae={},dt="undefined",ze=typeof window!=dt,tt=typeof document!=dt,Cs=()=>ze&&typeof window.requestAnimationFrame!=dt,ce=(e,t)=>{const n=X.get(e);return[()=>!g(t)&&e.get(t)||He,s=>{if(!g(t)){const r=e.get(t);t in Ae||(Ae[t]=r),n[5](t,oe(r,s),r||He)}},n[6],()=>!g(t)&&t in Ae?Ae[t]:!g(t)&&e.get(t)||He]};let nt=!0;const vs=()=>nt,[st,rt]=ze&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ue,ue],bs=()=>{const e=tt&&document.visibilityState;return g(e)||e!=="hidden"},Es=e=>(tt&&document.addEventListener("visibilitychange",e),st("focus",e),()=>{tt&&document.removeEventListener("visibilitychange",e),rt("focus",e)}),ys=e=>{const t=()=>{nt=!0,e()},n=()=>{nt=!1};return st("online",t),st("offline",n),()=>{rt("online",t),rt("offline",n)}},ws={isOnline:vs,isVisible:bs},Rs={initFocus:Es,initReconnect:ys},Ot=!y.useId,je=!ze||"Deno"in window,Ss=e=>Cs()?window.requestAnimationFrame(e):setTimeout(e,1),Re=je?c.useEffect:c.useLayoutEffect,Ke=typeof navigator<"u"&&navigator.connection,kt=!je&&Ke&&(["slow-2g","2g"].includes(Ke.effectiveType)||Ke.saveData),de=e=>{if(G(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Se(e):"",[e,t]};let js=0;const ot=()=>++js,Bt=0,$t=1,qt=2,_s=3;var we={__proto__:null,ERROR_REVALIDATE_EVENT:_s,FOCUS_EVENT:Bt,MUTATE_EVENT:qt,RECONNECT_EVENT:$t};async function Ht(...e){const[t,n,s,r]=e,o=oe({populateCache:!0,throwOnError:!0},typeof r=="boolean"?{revalidate:r}:r||{});let i=o.populateCache;const f=o.rollbackOnError;let u=o.optimisticData;const b=o.revalidate!==!1,h=E=>typeof f=="function"?f(E):f!==!1,x=o.throwOnError;if(G(n)){const E=n,v=[],w=t.keys();for(const I of w)!/^\$(inf|sub)\$/.test(I)&&E(t.get(I)._k)&&v.push(I);return Promise.all(v.map(l))}return l(n);async function l(E){const[v]=de(E);if(!v)return;const[w,I]=ce(t,v),[d,K,T,O]=X.get(t),A=d[v],z=()=>b&&(delete T[v],delete O[v],A&&A[0])?A[0](qt).then(()=>w().data):w().data;if(e.length<3)return z();let m=s,p;const j=ot();K[v]=[j,0];const C=!g(u),L=w(),M=L.data,N=L._c,P=g(N)?M:N;if(C&&(u=G(u)?u(P,M):u,I({data:u,_c:P})),G(m))try{m=m(P)}catch($){p=$}if(m&&ps(m))if(m=await m.catch($=>{p=$}),j!==K[v][0]){if(p)throw p;return m}else p&&C&&h(p)&&(i=!0,m=P,I({data:m,_c:B}));i&&(p||(G(i)&&(m=i(m,P)),I({data:m,error:B,_c:B}))),K[v][1]=ot();const F=await z();if(I({_c:B}),p){if(x)throw p;return}return i?F:m}}const Nt=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Kt=(e,t)=>{if(!X.has(e)){const n=oe(Rs,t),s={},r=Ht.bind(B,e);let o=ue;const i={},f=(h,x)=>{const l=i[h]||[];return i[h]=l,l.push(x),()=>l.splice(l.indexOf(x),1)},u=(h,x,l)=>{e.set(h,x);const E=i[h];if(E)for(const v of E)v(x,l)},b=()=>{if(!X.has(e)&&(X.set(e,[s,{},{},{},r,u,f]),!je)){const h=n.initFocus(setTimeout.bind(B,Nt.bind(B,s,Bt))),x=n.initReconnect(setTimeout.bind(B,Nt.bind(B,s,$t)));o=()=>{h&&h(),x&&x(),X.delete(e)}}};return b(),[e,r,b,o]}return[e,X.get(e)[4]]},Ts=(e,t,n,s,r)=>{const o=n.errorRetryCount,i=r.retryCount,f=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!g(o)&&i>o||setTimeout(s,f,r)},Os=(e,t)=>Se(e)==Se(t),[We,Gt]=Kt(new Map),Yt=oe({onLoadingSlow:ue,onSuccess:ue,onError:ue,onErrorRetry:Ts,onDiscarded:ue,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:kt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:kt?5e3:3e3,compare:Os,isPaused:()=>!1,cache:We,mutate:Gt,fallback:{}},ws),Qt=(e,t)=>{const n=oe(e,t);if(t){const{use:s,fallback:r}=e,{use:o,fallback:i}=t;s&&o&&(n.use=s.concat(o)),r&&i&&(n.fallback=oe(r,i))}return n},at=c.createContext({}),ks=e=>{const{value:t}=e,n=c.useContext(at),s=G(t),r=c.useMemo(()=>s?t(n):t,[s,n,t]),o=c.useMemo(()=>s?r:Qt(n,r),[s,n,r]),i=r&&r.provider,f=c.useRef(B);i&&!f.current&&(f.current=Kt(i(o.cache||We),r));const u=f.current;return u&&(o.cache=u[0],o.mutate=u[1]),Re(()=>{if(u)return u[2]&&u[2](),u[3]},[]),c.createElement(at.Provider,oe(e,{value:o}))},Xt=ze&&window.__SWR_DEVTOOLS_USE__,Ns=Xt?window.__SWR_DEVTOOLS_USE__:[],Is=()=>{Xt&&(window.__SWR_DEVTOOLS_REACT__=y)},Jt=e=>G(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Zt=()=>oe(Yt,c.useContext(at)),As=(e,t)=>{const[n,s]=de(e),[,,,r]=X.get(We);if(r[n])return r[n];const o=t(s);return r[n]=o,o},Ls=e=>(t,n,s)=>e(t,n&&((...o)=>{const[i]=de(t),[,,,f]=X.get(We),u=f[i];return g(u)?n(...o):(delete f[i],u)}),s),Ms=Ns.concat(Ls),Ps=e=>function(...n){const s=Zt(),[r,o,i]=Jt(n),f=Qt(s,i);let u=e;const{use:b}=f,h=(b||[]).concat(Ms);for(let x=h.length;x--;)u=h[x](u);return u(r,o||f.fetcher||null,f)},Ds=(e,t,n)=>{const s=t[e]||(t[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r>=0&&(s[r]=s[s.length-1],s.pop())}},Fs=(e,t)=>(...n)=>{const[s,r,o]=Jt(n),i=(o.use||[]).concat(t);return e(s,r,{...o,use:i})};Is();const Vs=e=>de(e)[0],It=y.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Ge={dedupe:!0},zs=(e,t,n)=>{const{cache:s,compare:r,suspense:o,fallbackData:i,revalidateOnMount:f,revalidateIfStale:u,refreshInterval:b,refreshWhenHidden:h,refreshWhenOffline:x,keepPreviousData:l}=n,[E,v,w,I]=X.get(s),[d,K]=de(e),T=c.useRef(!1),O=c.useRef(!1),A=c.useRef(d),z=c.useRef(t),m=c.useRef(n),p=()=>m.current,j=()=>p().isVisible()&&p().isOnline(),[C,L,M,N]=ce(s,d),P=c.useRef({}).current,F=g(i)?n.fallback[d]:i,$=(R,S)=>{for(const V in P){const k=V;if(k==="data"){if(!r(R[k],S[k])&&(!g(R[k])||!r(Ne,S[k])))return!1}else if(S[k]!==R[k])return!1}return!0},be=c.useMemo(()=>{const R=!d||!t?!1:g(f)?p().isPaused()||o?!1:g(u)?!0:u:f,S=W=>{const ee=oe(W);return delete ee._k,R?{isValidating:!0,isLoading:!0,...ee}:ee},V=C(),k=N(),Y=S(V),ge=V===k?Y:S(k);let D=Y;return[()=>{const W=S(C());return $(W,D)?(D.data=W.data,D.isLoading=W.isLoading,D.isValidating=W.isValidating,D.error=W.error,D):(D=W,W)},()=>ge]},[s,d]),ae=Lt.useSyncExternalStore(c.useCallback(R=>M(d,(S,V)=>{$(V,S)||R()}),[s,d]),be[0],be[1]),Oe=!T.current,J=E[d]&&E[d].length>0,ie=ae.data,Z=g(ie)?F:ie,ke=ae.error,pt=c.useRef(Z),Ne=l?g(ie)?pt.current:ie:Z,xt=J&&!g(ke)?!1:Oe&&!g(f)?f:p().isPaused()?!1:o?g(Z)?!1:u:g(Z)||u,Ct=!!(d&&t&&Oe&&xt),dn=g(ae.isValidating)?Ct:ae.isValidating,fn=g(ae.isLoading)?Ct:ae.isLoading,Ee=c.useCallback(async R=>{const S=z.current;if(!d||!S||O.current||p().isPaused())return!1;let V,k,Y=!0;const ge=R||{},D=!w[d]||!ge.dedupe,W=()=>Ot?!O.current&&d===A.current&&T.current:d===A.current,ee={isValidating:!1,isLoading:!1},bt=()=>{L(ee)},Et=()=>{const H=w[d];H&&H[1]===k&&delete w[d]},yt={isValidating:!0};g(C().data)&&(yt.isLoading=!0);try{if(D&&(L(yt),n.loadingTimeout&&g(C().data)&&setTimeout(()=>{Y&&W()&&p().onLoadingSlow(d,n)},n.loadingTimeout),w[d]=[S(K),ot()]),[V,k]=w[d],V=await V,D&&setTimeout(Et,n.dedupingInterval),!w[d]||w[d][1]!==k)return D&&W()&&p().onDiscarded(d),!1;ee.error=B;const H=v[d];if(!g(H)&&(k<=H[0]||k<=H[1]||H[1]===0))return bt(),D&&W()&&p().onDiscarded(d),!1;const te=C().data;ee.data=r(te,V)?te:V,D&&W()&&p().onSuccess(V,d,n)}catch(H){Et();const te=p(),{shouldRetryOnError:Ue}=te;te.isPaused()||(ee.error=H,D&&W()&&(te.onError(H,d,te),(Ue===!0||G(Ue)&&Ue(H))&&j()&&te.onErrorRetry(H,d,te,mn=>{const Be=E[d];Be&&Be[0]&&Be[0](we.ERROR_REVALIDATE_EVENT,mn)},{retryCount:(ge.retryCount||0)+1,dedupe:!0})))}return Y=!1,bt(),!0},[d,s]),vt=c.useCallback((...R)=>Ht(s,A.current,...R),[]);if(Re(()=>{z.current=t,m.current=n,g(ie)||(pt.current=ie)}),Re(()=>{if(!d)return;const R=Ee.bind(B,Ge);let S=0;const k=Ds(d,E,(Y,ge={})=>{if(Y==we.FOCUS_EVENT){const D=Date.now();p().revalidateOnFocus&&D>S&&j()&&(S=D+p().focusThrottleInterval,R())}else if(Y==we.RECONNECT_EVENT)p().revalidateOnReconnect&&j()&&R();else{if(Y==we.MUTATE_EVENT)return Ee();if(Y==we.ERROR_REVALIDATE_EVENT)return Ee(ge)}});return O.current=!1,A.current=d,T.current=!0,L({_k:K}),xt&&(g(Z)||je?R():Ss(R)),()=>{O.current=!0,k()}},[d]),Re(()=>{let R;function S(){const k=G(b)?b(C().data):b;k&&R!==-1&&(R=setTimeout(V,k))}function V(){!C().error&&(h||p().isVisible())&&(x||p().isOnline())?Ee(Ge).then(S):S()}return S(),()=>{R&&(clearTimeout(R),R=-1)}},[b,h,x,d]),c.useDebugValue(Ne),o&&g(Z)&&d){if(!Ot&&je)throw new Error("Fallback data is required when using suspense in SSR.");z.current=t,m.current=n,O.current=!1;const R=I[d];if(!g(R)){const S=vt(R);It(S)}if(g(ke)){const S=Ee(Ge);g(Ne)||(S.status="fulfilled",S.value=!0),It(S)}else throw ke}return{mutate:vt,get data(){return P.data=!0,Ne},get error(){return P.error=!0,ke},get isValidating(){return P.isValidating=!0,dn},get isLoading(){return P.isLoading=!0,fn}}},en=Me.defineProperty(ks,"defaultValue",{value:Yt}),ft=Ps(zs),Ws=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:en,default:ft,mutate:Gt,preload:As,unstable_serialize:Vs,useSWRConfig:Zt},Symbol.toStringTag,{value:"Module"})),Us="$inf$",Bs=e=>de(e?e(0,null):null)[0],Ye=Promise.resolve(),$s=e=>(t,n,s)=>{const r=c.useRef(!1),{cache:o,initialSize:i=1,revalidateAll:f=!1,persistSize:u=!1,revalidateFirstPage:b=!0,revalidateOnMount:h=!1,parallel:x=!1}=s;let l;try{l=Bs(t),l&&(l=Us+l)}catch{}const[E,v,w]=ce(o,l),I=c.useCallback(()=>g(E()._l)?i:E()._l,[o,l,i]);Lt.useSyncExternalStore(c.useCallback(m=>l?w(l,()=>{m()}):()=>{},[o,l]),I,I);const d=c.useCallback(()=>{const m=E()._l;return g(m)?i:m},[l,i]),K=c.useRef(d());Re(()=>{if(!r.current){r.current=!0;return}l&&v({_l:u?K.current:d()})},[l,o]);const T=h&&!r.current,O=e(l,async m=>{const p=E()._i,j=[],C=d(),[L]=ce(o,m),M=L().data,N=[];let P=null;for(let F=0;F<C;++F){const[$,be]=de(t(F,x?null:P));if(!$)break;const[ae,Oe]=ce(o,$);let J=ae().data;const ie=f||p||g(J)||b&&!F&&!g(M)||T||M&&!g(M[F])&&!s.compare(M[F],J);if(n&&ie){const Z=async()=>{J=await n(be),Oe({data:J,_k:be}),j[F]=J};x?N.push(Z):await Z()}else j[F]=J;x||(P=J)}return x&&await Promise.all(N.map(F=>F())),v({_i:B}),j},s),A=c.useCallback(function(m,p){const j=typeof p=="boolean"?{revalidate:p}:p||{},C=j.revalidate!==!1;return l?(C&&(g(m)?v({_i:!0}):v({_i:!1})),arguments.length?O.mutate(m,{...j,revalidate:C}):O.mutate()):Ye},[l,o]),z=c.useCallback(m=>{if(!l)return Ye;const[,p]=ce(o,l);let j;if(G(m)?j=m(d()):typeof m=="number"&&(j=m),typeof j!="number")return Ye;p({_l:j}),K.current=j;const C=[],[L]=ce(o,l);let M=null;for(let N=0;N<j;++N){const[P]=de(t(N,M)),[F]=ce(o,P),$=P?F().data:B;if(g($))return A(L().data);C.push($),M=$}return A(C)},[l,o,A,d]);return{size:d(),setSize:z,mutate:A,get data(){return O.data},get error(){return O.error},get isValidating(){return O.isValidating},get isLoading(){return O.isLoading}}},qs=Fs(ft,$s);function Hs(e,t){if(!e)throw typeof t=="string"?new Error(t):new Error(`${t.displayName} not found`)}var ve=(e,t)=>{const{assertCtxFn:n=Hs}=t||{},s=y.createContext(void 0);return s.displayName=e,[s,()=>{const i=y.useContext(s);return n(i,`${e} not found`),i.value},()=>{const i=y.useContext(s);return i?i.value:{}}]},tn={};os(tn,{SWRConfig:()=>en,useSWR:()=>ft,useSWRInfinite:()=>qs});as(tn,Ws);var[Ks,Gs]=ve("ClerkInstanceContext"),[zr,Ys]=ve("UserContext");ve("ClientContext");ve("SessionContext");ve("OrganizationContext");typeof window<"u"?y.useLayoutEffect:y.useEffect;const[Wr,Qs]=[Ks,Gs];function Xs(e){if(!e)throw new Error(ds)}const Js=Object.freeze({noGuarantees:Object.freeze({guaranteedLoaded:!1}),guaranteedLoaded:Object.freeze({guaranteedLoaded:!0})}),mt=y.createContext(void 0);mt.displayName="StructureContext";const Zs=()=>{const e=y.useContext(mt);return Xs(e),e},er=({children:e})=>Zs().guaranteedLoaded?y.createElement(y.Fragment,null,e):y.createElement(mt.Provider,{value:Js.guaranteedLoaded},e),he=(e,t)=>{t=t||e.displayName||e.name||"Component",e.displayName=t;const n=s=>{const r=Qs();return r.loaded?y.createElement(er,null,y.createElement(e,{...s,clerk:r})):null};return n.displayName=`withClerk(${t})`,n},[Ur,nn]=ve("AuthContext");function sn(){const e=Ys();return e===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:e===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}const tr=({children:e})=>{const{userId:t}=nn();return t?y.createElement(y.Fragment,null,e):null},nr=({children:e})=>{const{userId:t}=nn();return t===null?y.createElement(y.Fragment,null,e):null};he(({clerk:e,...t})=>{const{client:n,session:s}=e,{__unstable__environment:r}=e,o=n.activeSessions&&n.activeSessions.length>0;return y.useEffect(()=>{if(s===null&&o&&r){const{afterSignOutOneUrl:i}=r.displayConfig;e.navigate(i)}else e.redirectToSignIn(t)},[]),null},"RedirectToSignIn");he(({clerk:e,...t})=>(y.useEffect(()=>{e.redirectToSignUp(t)},[]),null),"RedirectToSignUp");he(({clerk:e})=>(y.useEffect(()=>{e.redirectToUserProfile()},[]),null),"RedirectToUserProfile");he(({clerk:e})=>(y.useEffect(()=>{e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");he(({clerk:e})=>(y.useEffect(()=>{e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");he(({clerk:e,...t})=>(y.useEffect(()=>{e.handleRedirectCallback(t)},[]),null),"AuthenticateWithRedirectCallback");const sr=he(({clerk:e,children:t,...n})=>{const{afterSignInUrl:s,afterSignUpUrl:r,redirectUrl:o,mode:i,...f}=n;t=hs(t,"Sign in");const u=ms(t)("SignInButton"),b=()=>{const l={afterSignInUrl:s,afterSignUpUrl:r,redirectUrl:o};return i==="modal"?e.openSignIn(l):e.redirectToSignIn(l)},x={...f,onClick:async l=>(await gs(u.props.onClick)(l),b())};return y.cloneElement(u,x)},"SignInButton"),rr=tr,or=nr;function ar({className:e}){return a.jsx("i",{className:re("icon-[mingcute--send-plane-line]",e)})}const ir=()=>{const e=Rn(),t=Pt();return a.jsxs("span",{className:re("font-mono text-[10px]",e?"text-red-500":"text-zinc-500"),children:[t.length,"/",Sn]})},cr=()=>{const e=Ce(),t=it(),n=ut(Fe().isWhisper),s=Ve();return e||t?null:a.jsxs("label",{className:"label mx-2 flex items-center",children:[a.jsx("input",{className:"checkbox-accent checkbox checkbox-sm mr-2",checked:n,type:"checkbox",onChange:r=>{const o=r.target.checked;s("isWhisper",o)}}),a.jsx("span",{className:"label-text text-sm",children:"悄悄话"})]})},lr=()=>{const e=Ce(),t=ut(Fe().syncToRecently),n=Ve(),s=it();return!e||s?null:a.jsxs("label",{className:"label mx-2 flex items-center",children:[a.jsx("input",{className:"checkbox-accent checkbox checkbox-sm mr-2",checked:t,type:"checkbox",onChange:r=>{const o=r.target.checked;n("syncToRecently",o)}}),a.jsx("span",{className:"label-text text-sm",children:"同步到碎碎念"})]})},ht=({className:e})=>{const t=Mt();return a.jsxs("footer",{className:Te("mt-3 flex h-5 w-full min-w-0 items-center justify-between",e),children:[a.jsxs("span",{className:re("flex-1 select-none text-[10px] text-zinc-500 transition-opacity"),children:[a.jsxs("span",{className:"hidden md:inline",children:["支持 ",a.jsx("b",{children:"Markdown"})," 与"," ",a.jsx(Dn,{href:"https://docs.github.com/zh/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax",children:"GFM"})]}),a.jsx(vn,{})]}),a.jsx(Bn,{children:t&&a.jsxs(De.aside,{initial:{opacity:0,scale:.96,y:8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:8},className:"flex select-none items-center gap-2.5",children:[a.jsx(ir,{}),a.jsx(cr,{}),a.jsx(lr,{}),a.jsx(ur,{})]},"send-button-wrapper")})]})},ur=()=>{const e=bn(),{text:t,author:n,mail:s,url:r,source:o,avatar:i,isWhisper:f,syncToRecently:u}=Fe(),{afterSubmit:b}=En(),h=Ce(),x=Vt(),l=it(),E=yn(),v=wn(),w=T=>(v==null||v(T),T),{mutate:I,isPending:d}=es({mutationFn:async T=>{const O=U.get(t),A=U.get(n),z=U.get(s),m=U.get(i),p=U.get(o),j=U.get(r),C={text:O,author:A,mail:z,avatar:m,source:p,url:j};if(h&&(delete C.source,delete C.avatar),Object.keys(C).forEach(N=>{C[N]===""&&delete C[N]}),l)return h?ye.comment.proxy.master.reply(T).post({data:{text:O}}).then(w):ye.comment.reply(T,C).then(w);const L=U.get(f),M=U.get(u);return h?ye.comment.proxy.master.comment(T).post({data:{text:O}}).then(async N=>(M&&ye.recently.proxy.post({data:{content:O,ref:T}}).then(()=>{qe.success("已同步到碎碎念")}),N)).then(w):(C.isWhispers=L,ye.comment.comment(T,C).then(w))},mutationKey:[e,"comment"],onError(T){qe.error(gn(T))},onSuccess(T){b==null||b();const O=h?"发表成功啦~":l?"感谢你的回复！":"感谢你的评论！",A=jn(E);qe.success(O),U.set(t,""),x.setQueryData(A,z=>z&&(l?Pe(z,m=>{const p=(C,L,M)=>{if(C.id===L)return C.children||(C.children=[]),C.children.push({...M,new:!0}),!0;if(C.children){for(const N of C.children)if(p(N,L,M))return!0;return!1}},j={...T,new:!0};for(const C of m.pages)for(const L of C.data)if(p(L,e,j))break}):Pe(z,m=>{m.pages[0].data.unshift({...T,new:!0})})))}}),K=()=>{I(e)};return a.jsxs(De.button,{className:"flex appearance-none items-center space-x-1 disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",disabled:d,onClick:K,children:[a.jsx(ar,{className:"h-5 w-5 text-zinc-800 dark:text-zinc-200"}),a.jsx(De.span,{className:"text-sm",layout:"size",children:d?"送信...":"送信"})]})},dr=()=>{const e="bg-gray-200/50 dark:bg-zinc-800/50";return a.jsxs("div",{className:"flex animate-pulse gap-4",children:[a.jsx("div",{className:re("h-12 w-12 self-end overflow-hidden rounded-full",e)}),a.jsx("div",{className:re("h-[150px] w-full rounded-lg",e)})]})},rn=c.forwardRef((e,t)=>{const{className:n,children:s,...r}=e,o=Ze(0),i=Ze(0),f=c.useCallback(({clientX:x,clientY:l,currentTarget:E})=>{const v=E.getBoundingClientRect();o.set(x-v.left),i.set(l-v.top)},[o,i]),u=Jn`radial-gradient(320px circle at ${o}px ${i}px, var(--spotlight-color) 0%, transparent 85%)`,b=pn(),h=Nn(e);return a.jsxs("div",{className:"group relative h-full [--spotlight-color:hsl(var(--a)_/_0.05)]",onMouseMove:f,children:[!b&&a.jsx(De.div,{className:"pointer-events-none absolute left-0 right-0 top-0 z-0 h-[150px] rounded-xl opacity-0 transition-opacity duration-500 group-hover:opacity-100",style:{background:u},"aria-hidden":"true"}),a.jsx("textarea",{ref:t,className:Te("h-full w-full resize-none bg-transparent","overflow-auto px-3 py-4","text-neutral-900/80 dark:text-slate-100/80",n),...r,...h}),s]})});rn.displayName="TextArea";const fr=Fn(()=>hn(()=>import("./EmojiPicker-q4s3gzpP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then(e=>e.EmojiPicker)),gt=()=>{const e=Je(()=>_n()),t=Ve(),n=Pt(),s=c.useRef(null),r=c.useCallback(o=>{if(!s.current)return;const i=s.current,f=i.selectionStart,u=i.selectionEnd;i.value=`${i.value.substring(0,f)} ${o} ${i.value.substring(u,i.value.length)}`,t("text",i.value),requestAnimationFrame(()=>{const b=f+o.length+2;i.selectionStart=b,i.selectionEnd=b,i.focus()})},[]);return c.useEffect(()=>{const o=s.current;o&&n!==o.value&&(o.value=n)},[n]),c.useLayoutEffect(()=>{const o=s.current;o&&(o.selectionStart=o.selectionEnd=o.value.length,o.focus())},[]),a.jsx(rn,{ref:s,defaultValue:n,onChange:o=>t("text",o.target.value),placeholder:e,children:a.jsx(Tn,{children:a.jsx(zt,{trigger:"click",TriggerComponent:mr,headless:!0,children:a.jsx(fr,{onEmojiSelect:r})})})})},mr=()=>a.jsxs("button",{className:"ml-0 inline-flex h-5 w-5 translate-y-1 text-base center md:ml-4",onClick:xn,children:[a.jsx("i",{className:"icon-[mingcute--emoji-2-line]"}),a.jsx("span",{className:"sr-only",children:"表情"})]}),hr=()=>{const{user:e}=sn(),t=Ve(),n=e?e.fullName||e.lastName||e.firstName||"Anonymous":"";return c.useEffect(()=>{var s;e&&(t("author",n),t("avatar",e.profileImageUrl),t("mail",((s=e.primaryEmailAddress)==null?void 0:s.emailAddress)||""))},[n,e]),e?a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("div",{className:re("mb-2 flex-shrink-0 select-none self-end overflow-hidden rounded-full",'dark:ring-zinc-800" bg-zinc-200 ring-2 ring-zinc-200 dark:bg-zinc-800',"ml-[2px] backface-hidden"),children:a.jsx(Dt,{className:"rounded-full object-cover",src:e.profileImageUrl,alt:`${n}'s avatar`,width:48,height:48})}),a.jsx("div",{className:"relative h-[150px] w-full rounded-lg bg-gray-200/50 pb-5 dark:bg-zinc-800/50",children:a.jsx(gt,{})}),a.jsx(ht,{className:"absolute bottom-0 left-12 right-0 mb-2 ml-4 w-auto px-4"})]}):a.jsx(dr,{})};Wt({});const on=c.createContext(null),an=c.createContext(null),cn=()=>c.useContext(on),gr=()=>c.useContext(an),pr=e=>{const{showErrorMessage:t=!0,...n}=e,s=Je(()=>Wt({}));return a.jsx(on.Provider,{value:Je(()=>({showErrorMessage:t,fields:s,getField:r=>U.get(s)[r],addField:(r,o)=>{U.set(s,i=>({...i,[r]:o}))},removeField:r=>{U.set(s,o=>{const i={...o};return delete i[r],i})}})),children:a.jsx(an.Provider,{value:c.useMemo(()=>({showErrorMessage:t}),[t]),children:a.jsx(xr,{...n})})})},xr=e=>{const{onSubmit:t,...n}=e,s=cn().fields,r=c.useCallback(async o=>{o.preventDefault();const i=U.get(s);for await(const[f,u]of Object.entries(i)){const b=u.$ref;if(!b)continue;const h=b.value,x=u.rules;for(let l=0;l<x.length;l++){const E=x[l];try{if(!await E.validator(h)){console.error(`Form validation failed, at field \`${f}\`, got value \`${h}\``),b.focus(),E.message&&U.set(s,w=>Pe(w,I=>{I[f].rules[l].status="error"}));return}}catch(v){console.error("validate function throw error",v);return}}}t==null||t(o)},[t]);return a.jsx("form",{onSubmit:r,...n,children:e.children})},ln=c.memo(({className:e,rules:t,onKeyDown:n,...s})=>{const r=cn();if(!r)throw new Error("FormInput must be used inside <FormContext />");const{showErrorMessage:o}=gr(),{addField:i,removeField:f,fields:u}=r,b=c.useRef(null),h=ut(Wn(u,c.useCallback(l=>{var E,v;if(s.name)return(v=(E=l[s.name])==null?void 0:E.rules.find(w=>w.status==="error"))==null?void 0:v.message},[s.name])));c.useEffect(()=>{const l=s.name;if(t&&l)return i(l,{rules:t,$ref:b.current}),()=>{f(l)}},[s.name,t]);const x=c.useCallback(l=>{n&&n(l),U.set(u,E=>Pe(E,v=>{s.name&&v[s.name].rules.forEach(w=>{w.status==="error"&&(w.status="success")})}))},[u,n,s.name]);return a.jsxs(a.Fragment,{children:[a.jsx(In,{ref:b,className:Te(!!h&&"ring-2 ring-red-400 dark:ring-orange-700","w-full",e),type:"text",onKeyDown:x,...s}),o&&a.jsx(lt,{duration:.2,children:a.jsx("p",{className:"text-left text-sm text-red-400 dark:text-orange-700",children:h})})]})});ln.displayName="FormInput";const Cr=()=>Ce()?a.jsx(Er,{}):a.jsx(br,{}),un="relative h-[150px] w-full rounded-lg bg-gray-200/50 pb-5 dark:bg-zinc-800/50",vr={author:"昵称",mail:"邮箱",url:"网址"},Qe=e=>{const{fieldKey:t,required:n}=e,[s,r]=Un(Fe()[t]);return a.jsx(ln,{type:"text",value:s,onChange:o=>r(o.target.value),required:n,placeholder:vr[t]+(n?" *":""),className:"border-0 bg-gray-200/50 dark:bg-zinc-800/50"})},br=()=>a.jsxs(pr,{className:"flex flex-col space-y-4 px-2 pt-2",showErrorMessage:!1,children:[a.jsxs("div",{className:"flex flex-col space-x-0 space-y-4 md:flex-row md:space-x-4 md:space-y-0",children:[a.jsx(Qe,{fieldKey:"author",required:!0}),a.jsx(Qe,{fieldKey:"mail",required:!0}),a.jsx(Qe,{fieldKey:"url"})]}),a.jsx("div",{className:Te(un,"pb-8"),children:a.jsx(gt,{})}),a.jsx(ht,{className:"absolute bottom-4 left-0 right-4 mb-2 ml-4 w-auto px-4"})]}),Er=()=>{const e=Cn(t=>t.user);return a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("div",{className:re("mb-2 flex-shrink-0 select-none self-end overflow-hidden rounded-full",'dark:ring-zinc-800" bg-zinc-200 ring-2 ring-zinc-200 dark:bg-zinc-800',"ml-[2px] backface-hidden"),children:a.jsx(Dt,{className:"rounded-full object-cover",src:e.avatar,alt:`${e.name||e.username}'s avatar`,width:48,height:48})}),a.jsx("div",{className:un,children:a.jsx(gt,{})}),a.jsx(ht,{className:"absolute bottom-0 left-12 right-0 mb-2 ml-4 w-auto px-4"})]})};function yr(e){return a.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:a.jsx("path",{d:"M11 15H7C4.79086 15 3 16.7909 3 19C3 20.1046 3.89543 21 5 21H15M16.8744 13C16.2164 13.4935 15.6221 14.066 15.1049 14.7043C15.035 14.7906 15 14.8953 15 15M16.8744 17C16.2164 16.5065 15.6221 15.934 15.1049 15.2957C15.035 15.2094 15 15.1047 15 15M15 15H21M15 7C15 9.20914 13.2091 11 11 11C8.79086 11 7 9.20914 7 7C7 4.79086 8.79086 3 11 3C13.2091 3 15 4.79086 15 7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function wr(){const e=Vn();return a.jsxs("div",{className:"flex h-[150px] w-full space-x-4 rounded-lg bg-gray-100/80 center dark:bg-zinc-900/80",children:[a.jsx(jt,{variant:"secondary",type:"button",onClick:()=>{ct(Q.legacy)},children:"免登录评论"}),a.jsx(sr,{mode:"modal",redirectUrl:An(e).href,children:a.jsxs(jt,{variant:"primary",type:"button",children:[a.jsx(yr,{className:"mr-1 h-5 w-5"}),"登录后才可以留言噢"]})})]})}const Rr=()=>{const e=Xe(),t=`转换到${e===Q.legacy?"新":"旧"}版评论`,n=Mt(),s=!!sn(),r=c.useRef(function(){const f=Xe();return a.jsxs(a.Fragment,{children:[a.jsx("i",{className:re(f===Q.legacy?"icon-[mingcute--user-4-line]":"icon-[material-symbols--dynamic-form-outline]")}),a.jsx("span",{className:"sr-only",children:t})]})}).current;return Ce()?null:a.jsx(Qn,{className:re("absolute left-0 top-0 z-10 rounded-full text-sm","h-6 w-6 border border-slate-200 dark:border-neutral-800","bg-slate-100 dark:bg-neutral-900","flex cursor-pointer text-base-100/50 center","text-base-content/50","opacity-0 transition-opacity duration-200 group-[:hover]:opacity-100",e===Q.legacy&&"bottom-0 top-auto",n||s&&e===Q["with-auth"]&&"invisible opacity-0"),onClick:()=>{ct(e===Q.legacy?Q["with-auth"]:Q.legacy)},children:a.jsx(zt,{TriggerComponent:r,children:t})})},Br=e=>{const{refId:t,className:n,afterSubmit:s,initialValue:r}=e,o=Xe(),i=Ce();return c.useEffect(()=>{i&&ct(Q.legacy)},[i]),a.jsx(On,{children:a.jsx(kn,{refId:t,afterSubmit:s,initialValue:r,children:a.jsxs("div",{className:Te("group relative w-full min-w-0",n),"data-hide-print":!0,children:[a.jsx(Rr,{}),a.jsx("div",{className:"relative w-full",children:o===Q.legacy?a.jsx(Sr,{}):a.jsx(jr,{})})]})})})},Sr=()=>a.jsx(lt,{children:a.jsx(Cr,{})}),jr=()=>a.jsxs(lt,{children:[a.jsx(or,{children:a.jsx(wr,{})}),a.jsx(rr,{children:a.jsx(hr,{})})]});export{Br as C};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./EmojiPicker-q4s3gzpP.js","./index-33dwo9K-.js","./index-56MkI4ud.css","./Markdown-wJ0uSamB.js","./helper-wV2Sx7aH.js","./spring-v-SIdMkd.js","./index-5dkmL82r.js","./LinkCard-ffF9KqDX.js","./Divider-Oi9OD1qc.js","./env-jTYMx4r5.js","./LinkCard-mI1tuEpo.css","./Collapse-8BoKkbA5.js","./Gallery-8bUGafna.js","./Gallery-cCMf-PmV.css","./RichLink-IEVR7UGc.js","./Markdown-v7di3Krj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}