var $e=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var R=(e,t,n)=>($e(e,t,"read from private field"),n?n.call(e):t.get(e)),fe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},me=(e,t,n,s)=>($e(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);var ge=(e,t,n)=>($e(e,t,"access private method"),n);import{r as c,c as wt,R as y,j as a,_ as mn}from"./index-68e81e95.js";import{s as At}from"./index-7fe4e02e.js";import{e as Ce,b as ye,t as He,r as hn,v as pn,p as gn,w as xn}from"./LinkCard.module-80ef03c5.js";import{u as Lt,a as Cn,b as vn,c as Fe,d as bn,e as it,f as En,g as yn,h as wn,i as Mt,M as Rn,j as Ve,k as Sn,l as jn,m as _n,s as ct,n as X,o as Xe,E as Tn,p as On}from"./Comments-3077fa01.js";import{p as Pe,j as kn,I as Nn,A as lt,k as In}from"./utils-785bf0ec.js";import{c as re,a as Te}from"./helper-cbdea6f1.js";import{j as An,g as Je,I as Pt}from"./Gallery-f373ff03.js";import{S as Ln,n as Dt,l as Ft,q as Mn,r as Pn,d as Dn,F as Vt,t as Fn}from"./Markdown-eb212eb4.js";import{g as Vn}from"./mutation-bfc29ffb.js";import{b as ut,j as B,a as zt,s as zn,i as Wn}from"./Divider-9716d436.js";import{A as Un}from"./Collapse-ec50c151.js";import{a as Bn,e as $n,g as Hn,u as qn,h as Gn,f as Kn,i as Rt,m as De,S as St,M as Yn}from"./spring-608151cc.js";function Ze(e){const t=Bn(()=>$n(e)),{isStatic:n}=c.useContext(Hn);if(n){const[,s]=c.useState(e);c.useEffect(()=>t.on("change",s),[])}return t}function Qn(e,t){const n=Ze(t()),s=()=>n.set(t());return s(),qn(()=>{const r=()=>Kn.update(s,!1,!0),o=e.map(i=>i.on("change",r));return()=>{o.forEach(i=>i()),Gn(s)}}),n}function Xn(e,...t){const n=e.length;function s(){let r="";for(let o=0;o<n;o++){r+=e[o];const i=t[o];i&&(r+=Rt(i)?i.get():i)}return r}return Qn(t.filter(Rt),s)}var le,U,G,se,xe,Le,_e,et,It,Jn=(It=class extends Ln{constructor(t,n){super();fe(this,xe);fe(this,_e);fe(this,le,void 0);fe(this,U,void 0);fe(this,G,void 0);fe(this,se,void 0);me(this,U,void 0),me(this,le,t),this.setOptions(n),this.bindMethods(),ge(this,xe,Le).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const n=this.options;this.options=R(this,le).defaultMutationOptions(t),An(n,this.options)||R(this,le).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,G),observer:this}),(s=R(this,G))==null||s.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=R(this,G))==null||t.removeObserver(this)}onMutationUpdate(t){ge(this,xe,Le).call(this),ge(this,_e,et).call(this,t)}getCurrentResult(){return R(this,U)}reset(){me(this,G,void 0),ge(this,xe,Le).call(this),ge(this,_e,et).call(this)}mutate(t,n){var s;return me(this,se,n),(s=R(this,G))==null||s.removeObserver(this),me(this,G,R(this,le).getMutationCache().build(R(this,le),this.options)),R(this,G).addObserver(this),R(this,G).execute(t)}},le=new WeakMap,U=new WeakMap,G=new WeakMap,se=new WeakMap,xe=new WeakSet,Le=function(){var n;const t=((n=R(this,G))==null?void 0:n.state)??Vn();me(this,U,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},_e=new WeakSet,et=function(t){Dt.batch(()=>{var n,s,r,o,i,f,u,C;R(this,se)&&this.hasListeners()&&((t==null?void 0:t.type)==="success"?((s=(n=R(this,se)).onSuccess)==null||s.call(n,t.data,R(this,U).variables,R(this,U).context),(o=(r=R(this,se)).onSettled)==null||o.call(r,t.data,null,R(this,U).variables,R(this,U).context)):(t==null?void 0:t.type)==="error"&&((f=(i=R(this,se)).onError)==null||f.call(i,t.error,R(this,U).variables,R(this,U).context),(C=(u=R(this,se)).onSettled)==null||C.call(u,void 0,t.error,R(this,U).variables,R(this,U).context))),this.listeners.forEach(v=>{v(R(this,U))})})},It);function Zn(e,t){const n=Ft(t),[s]=c.useState(()=>new Jn(n,e));c.useEffect(()=>{s.setOptions(e)},[s,e]);const r=c.useSyncExternalStore(c.useCallback(i=>s.subscribe(Dt.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=c.useCallback((i,f)=>{s.mutate(i,f).catch(es)},[s]);if(r.error&&Mn(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}function es(){}typeof window<"u"&&!window.global&&(window.global=typeof wt>"u"?window:wt);var Wt=Object.defineProperty,ts=Object.getOwnPropertyDescriptor,ns=Object.getOwnPropertyNames,ss=Object.prototype.hasOwnProperty,rs=(e,t)=>{for(var n in t)Wt(e,n,{get:t[n],enumerable:!0})},jt=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ns(t))!ss.call(e,r)&&r!==n&&Wt(e,r,{get:()=>t[r],enumerable:!(s=ts(t,r))||s.enumerable});return e},os=(e,t,n)=>(jt(e,t,"default"),n&&jt(n,t,"default")),as=()=>{try{return!1}catch{}return!1},is=()=>{try{return!0}catch{}return!1},_t=new Set,cs=(e,t,n)=>{const s=as()||is(),r=n??e;_t.has(r)||s||(_t.add(r),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.
${t}`))},ls={Expired:"expired",Failed:"failed"};new Proxy(ls,{get(e,t,n){return cs("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(e,t,n)}});const us="Clerk: You must wrap your application in a <ClerkProvider> component.",ds=e=>`Clerk: You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`,fs=e=>t=>{try{return y.Children.only(e)}catch{throw new Error(ds(t))}},ms=(e,t)=>(e||(e=t),typeof e=="string"&&(e=y.createElement("button",null,e)),e),hs=e=>(...t)=>{if(e&&typeof e=="function")return e(...t)},ue=()=>{},$=ue(),Me=Object,h=e=>e===$,Y=e=>typeof e=="function",oe=(e,t)=>({...e,...t}),ps=e=>Y(e.then),Ie=new WeakMap;let gs=0;const Se=e=>{const t=typeof e,n=e&&e.constructor,s=n==Date;let r,o;if(Me(e)===e&&!s&&n!=RegExp){if(r=Ie.get(e),r)return r;if(r=++gs+"~",Ie.set(e,r),n==Array){for(r="@",o=0;o<e.length;o++)r+=Se(e[o])+",";Ie.set(e,r)}if(n==Me){r="#";const i=Me.keys(e).sort();for(;!h(o=i.pop());)h(e[o])||(r+=o+":"+Se(e[o])+",");Ie.set(e,r)}}else r=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return r},J=new WeakMap,qe={},Ae={},dt="undefined",ze=typeof window!=dt,tt=typeof document!=dt,xs=()=>ze&&typeof window.requestAnimationFrame!=dt,ce=(e,t)=>{const n=J.get(e);return[()=>!h(t)&&e.get(t)||qe,s=>{if(!h(t)){const r=e.get(t);t in Ae||(Ae[t]=r),n[5](t,oe(r,s),r||qe)}},n[6],()=>!h(t)&&t in Ae?Ae[t]:!h(t)&&e.get(t)||qe]};let nt=!0;const Cs=()=>nt,[st,rt]=ze&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ue,ue],vs=()=>{const e=tt&&document.visibilityState;return h(e)||e!=="hidden"},bs=e=>(tt&&document.addEventListener("visibilitychange",e),st("focus",e),()=>{tt&&document.removeEventListener("visibilitychange",e),rt("focus",e)}),Es=e=>{const t=()=>{nt=!0,e()},n=()=>{nt=!1};return st("online",t),st("offline",n),()=>{rt("online",t),rt("offline",n)}},ys={isOnline:Cs,isVisible:vs},ws={initFocus:bs,initReconnect:Es},Tt=!y.useId,je=!ze||"Deno"in window,Rs=e=>xs()?window.requestAnimationFrame(e):setTimeout(e,1),Re=je?c.useEffect:c.useLayoutEffect,Ge=typeof navigator<"u"&&navigator.connection,Ot=!je&&Ge&&(["slow-2g","2g"].includes(Ge.effectiveType)||Ge.saveData),de=e=>{if(Y(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Se(e):"",[e,t]};let Ss=0;const ot=()=>++Ss,Ut=0,Bt=1,$t=2,js=3;var we={__proto__:null,ERROR_REVALIDATE_EVENT:js,FOCUS_EVENT:Ut,MUTATE_EVENT:$t,RECONNECT_EVENT:Bt};async function Ht(...e){const[t,n,s,r]=e,o=oe({populateCache:!0,throwOnError:!0},typeof r=="boolean"?{revalidate:r}:r||{});let i=o.populateCache;const f=o.rollbackOnError;let u=o.optimisticData;const C=o.revalidate!==!1,v=E=>typeof f=="function"?f(E):f!==!1,b=o.throwOnError;if(Y(n)){const E=n,x=[],w=t.keys();for(const I of w)!/^\$(inf|sub)\$/.test(I)&&E(t.get(I)._k)&&x.push(I);return Promise.all(x.map(l))}return l(n);async function l(E){const[x]=de(E);if(!x)return;const[w,I]=ce(t,x),[d,K,T,O]=J.get(t),A=d[x],z=()=>C&&(delete T[x],delete O[x],A&&A[0])?A[0]($t).then(()=>w().data):w().data;if(e.length<3)return z();let m=s,p;const _=ot();K[x]=[_,0];const g=!h(u),L=w(),M=L.data,N=L._c,P=h(N)?M:N;if(g&&(u=Y(u)?u(P,M):u,I({data:u,_c:P})),Y(m))try{m=m(P)}catch(H){p=H}if(m&&ps(m))if(m=await m.catch(H=>{p=H}),_!==K[x][0]){if(p)throw p;return m}else p&&g&&v(p)&&(i=!0,m=P,I({data:m,_c:$}));i&&(p||(Y(i)&&(m=i(m,P)),I({data:m,error:$,_c:$}))),K[x][1]=ot();const F=await z();if(I({_c:$}),p){if(b)throw p;return}return i?F:m}}const kt=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},qt=(e,t)=>{if(!J.has(e)){const n=oe(ws,t),s={},r=Ht.bind($,e);let o=ue;const i={},f=(v,b)=>{const l=i[v]||[];return i[v]=l,l.push(b),()=>l.splice(l.indexOf(b),1)},u=(v,b,l)=>{e.set(v,b);const E=i[v];if(E)for(const x of E)x(b,l)},C=()=>{if(!J.has(e)&&(J.set(e,[s,{},{},{},r,u,f]),!je)){const v=n.initFocus(setTimeout.bind($,kt.bind($,s,Ut))),b=n.initReconnect(setTimeout.bind($,kt.bind($,s,Bt)));o=()=>{v&&v(),b&&b(),J.delete(e)}}};return C(),[e,r,C,o]}return[e,J.get(e)[4]]},_s=(e,t,n,s,r)=>{const o=n.errorRetryCount,i=r.retryCount,f=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!h(o)&&i>o||setTimeout(s,f,r)},Ts=(e,t)=>Se(e)==Se(t),[We,Gt]=qt(new Map),Kt=oe({onLoadingSlow:ue,onSuccess:ue,onError:ue,onErrorRetry:_s,onDiscarded:ue,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ot?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ot?5e3:3e3,compare:Ts,isPaused:()=>!1,cache:We,mutate:Gt,fallback:{}},ys),Yt=(e,t)=>{const n=oe(e,t);if(t){const{use:s,fallback:r}=e,{use:o,fallback:i}=t;s&&o&&(n.use=s.concat(o)),r&&i&&(n.fallback=oe(r,i))}return n},at=c.createContext({}),Os=e=>{const{value:t}=e,n=c.useContext(at),s=Y(t),r=c.useMemo(()=>s?t(n):t,[s,n,t]),o=c.useMemo(()=>s?r:Yt(n,r),[s,n,r]),i=r&&r.provider,f=c.useRef($);i&&!f.current&&(f.current=qt(i(o.cache||We),r));const u=f.current;return u&&(o.cache=u[0],o.mutate=u[1]),Re(()=>{if(u)return u[2]&&u[2](),u[3]},[]),c.createElement(at.Provider,oe(e,{value:o}))},Qt=ze&&window.__SWR_DEVTOOLS_USE__,ks=Qt?window.__SWR_DEVTOOLS_USE__:[],Ns=()=>{Qt&&(window.__SWR_DEVTOOLS_REACT__=y)},Xt=e=>Y(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Jt=()=>oe(Kt,c.useContext(at)),Is=(e,t)=>{const[n,s]=de(e),[,,,r]=J.get(We);if(r[n])return r[n];const o=t(s);return r[n]=o,o},As=e=>(t,n,s)=>e(t,n&&((...o)=>{const[i]=de(t),[,,,f]=J.get(We),u=f[i];return h(u)?n(...o):(delete f[i],u)}),s),Ls=ks.concat(As),Ms=e=>function(...n){const s=Jt(),[r,o,i]=Xt(n),f=Yt(s,i);let u=e;const{use:C}=f,v=(C||[]).concat(Ls);for(let b=v.length;b--;)u=v[b](u);return u(r,o||f.fetcher||null,f)},Ps=(e,t,n)=>{const s=t[e]||(t[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r>=0&&(s[r]=s[s.length-1],s.pop())}},Ds=(e,t)=>(...n)=>{const[s,r,o]=Xt(n),i=(o.use||[]).concat(t);return e(s,r,{...o,use:i})};Ns();const Fs=e=>de(e)[0],Nt=y.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Ke={dedupe:!0},Vs=(e,t,n)=>{const{cache:s,compare:r,suspense:o,fallbackData:i,revalidateOnMount:f,revalidateIfStale:u,refreshInterval:C,refreshWhenHidden:v,refreshWhenOffline:b,keepPreviousData:l}=n,[E,x,w,I]=J.get(s),[d,K]=de(e),T=c.useRef(!1),O=c.useRef(!1),A=c.useRef(d),z=c.useRef(t),m=c.useRef(n),p=()=>m.current,_=()=>p().isVisible()&&p().isOnline(),[g,L,M,N]=ce(s,d),P=c.useRef({}).current,F=h(i)?n.fallback[d]:i,H=(S,j)=>{for(const V in P){const k=V;if(k==="data"){if(!r(S[k],j[k])&&(!h(S[k])||!r(Ne,j[k])))return!1}else if(j[k]!==S[k])return!1}return!0},be=c.useMemo(()=>{const S=(()=>!d||!t?!1:h(f)?p().isPaused()||o?!1:h(u)?!0:u:f)(),j=W=>{const te=oe(W);return delete te._k,S?{isValidating:!0,isLoading:!0,...te}:te},V=g(),k=N(),Q=j(V),pe=V===k?Q:j(k);let D=Q;return[()=>{const W=j(g());return H(W,D)?(D.data=W.data,D.isLoading=W.isLoading,D.isValidating=W.isValidating,D.error=W.error,D):(D=W,W)},()=>pe]},[s,d]),ae=At.useSyncExternalStore(c.useCallback(S=>M(d,(j,V)=>{H(V,j)||S()}),[s,d]),be[0],be[1]),Oe=!T.current,Z=E[d]&&E[d].length>0,ie=ae.data,ee=h(ie)?F:ie,ke=ae.error,gt=c.useRef(ee),Ne=l?h(ie)?gt.current:ie:ee,xt=(()=>Z&&!h(ke)?!1:Oe&&!h(f)?f:p().isPaused()?!1:o?h(ee)?!1:u:h(ee)||u)(),Ct=!!(d&&t&&Oe&&xt),un=h(ae.isValidating)?Ct:ae.isValidating,dn=h(ae.isLoading)?Ct:ae.isLoading,Ee=c.useCallback(async S=>{const j=z.current;if(!d||!j||O.current||p().isPaused())return!1;let V,k,Q=!0;const pe=S||{},D=!w[d]||!pe.dedupe,W=()=>Tt?!O.current&&d===A.current&&T.current:d===A.current,te={isValidating:!1,isLoading:!1},bt=()=>{L(te)},Et=()=>{const q=w[d];q&&q[1]===k&&delete w[d]},yt={isValidating:!0};h(g().data)&&(yt.isLoading=!0);try{if(D&&(L(yt),n.loadingTimeout&&h(g().data)&&setTimeout(()=>{Q&&W()&&p().onLoadingSlow(d,n)},n.loadingTimeout),w[d]=[j(K),ot()]),[V,k]=w[d],V=await V,D&&setTimeout(Et,n.dedupingInterval),!w[d]||w[d][1]!==k)return D&&W()&&p().onDiscarded(d),!1;te.error=$;const q=x[d];if(!h(q)&&(k<=q[0]||k<=q[1]||q[1]===0))return bt(),D&&W()&&p().onDiscarded(d),!1;const ne=g().data;te.data=r(ne,V)?ne:V,D&&W()&&p().onSuccess(V,d,n)}catch(q){Et();const ne=p(),{shouldRetryOnError:Ue}=ne;ne.isPaused()||(te.error=q,D&&W()&&(ne.onError(q,d,ne),(Ue===!0||Y(Ue)&&Ue(q))&&_()&&ne.onErrorRetry(q,d,ne,fn=>{const Be=E[d];Be&&Be[0]&&Be[0](we.ERROR_REVALIDATE_EVENT,fn)},{retryCount:(pe.retryCount||0)+1,dedupe:!0})))}return Q=!1,bt(),!0},[d,s]),vt=c.useCallback((...S)=>Ht(s,A.current,...S),[]);if(Re(()=>{z.current=t,m.current=n,h(ie)||(gt.current=ie)}),Re(()=>{if(!d)return;const S=Ee.bind($,Ke);let j=0;const k=Ps(d,E,(Q,pe={})=>{if(Q==we.FOCUS_EVENT){const D=Date.now();p().revalidateOnFocus&&D>j&&_()&&(j=D+p().focusThrottleInterval,S())}else if(Q==we.RECONNECT_EVENT)p().revalidateOnReconnect&&_()&&S();else{if(Q==we.MUTATE_EVENT)return Ee();if(Q==we.ERROR_REVALIDATE_EVENT)return Ee(pe)}});return O.current=!1,A.current=d,T.current=!0,L({_k:K}),xt&&(h(ee)||je?S():Rs(S)),()=>{O.current=!0,k()}},[d]),Re(()=>{let S;function j(){const k=Y(C)?C(g().data):C;k&&S!==-1&&(S=setTimeout(V,k))}function V(){!g().error&&(v||p().isVisible())&&(b||p().isOnline())?Ee(Ke).then(j):j()}return j(),()=>{S&&(clearTimeout(S),S=-1)}},[C,v,b,d]),c.useDebugValue(Ne),o&&h(ee)&&d){if(!Tt&&je)throw new Error("Fallback data is required when using suspense in SSR.");z.current=t,m.current=n,O.current=!1;const S=I[d];if(!h(S)){const j=vt(S);Nt(j)}if(h(ke)){const j=Ee(Ke);h(Ne)||(j.status="fulfilled",j.value=!0),Nt(j)}else throw ke}return{mutate:vt,get data(){return P.data=!0,Ne},get error(){return P.error=!0,ke},get isValidating(){return P.isValidating=!0,un},get isLoading(){return P.isLoading=!0,dn}}},Zt=Me.defineProperty(Os,"defaultValue",{value:Kt}),ft=Ms(Vs),zs=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:Zt,default:ft,mutate:Gt,preload:Is,unstable_serialize:Fs,useSWRConfig:Jt},Symbol.toStringTag,{value:"Module"})),Ws="$inf$",Us=e=>de(e?e(0,null):null)[0],Ye=Promise.resolve(),Bs=e=>(t,n,s)=>{const r=c.useRef(!1),{cache:o,initialSize:i=1,revalidateAll:f=!1,persistSize:u=!1,revalidateFirstPage:C=!0,revalidateOnMount:v=!1,parallel:b=!1}=s;let l;try{l=Us(t),l&&(l=Ws+l)}catch{}const[E,x,w]=ce(o,l),I=c.useCallback(()=>h(E()._l)?i:E()._l,[o,l,i]);At.useSyncExternalStore(c.useCallback(m=>l?w(l,()=>{m()}):()=>{},[o,l]),I,I);const d=c.useCallback(()=>{const m=E()._l;return h(m)?i:m},[l,i]),K=c.useRef(d());Re(()=>{if(!r.current){r.current=!0;return}l&&x({_l:u?K.current:d()})},[l,o]);const T=v&&!r.current,O=e(l,async m=>{const p=E()._i,_=[],g=d(),[L]=ce(o,m),M=L().data,N=[];let P=null;for(let F=0;F<g;++F){const[H,be]=de(t(F,b?null:P));if(!H)break;const[ae,Oe]=ce(o,H);let Z=ae().data;const ie=f||p||h(Z)||C&&!F&&!h(M)||T||M&&!h(M[F])&&!s.compare(M[F],Z);if(n&&ie){const ee=async()=>{Z=await n(be),Oe({data:Z,_k:be}),_[F]=Z};b?N.push(ee):await ee()}else _[F]=Z;b||(P=Z)}return b&&await Promise.all(N.map(F=>F())),x({_i:$}),_},s),A=c.useCallback(function(m,p){const _=typeof p=="boolean"?{revalidate:p}:p||{},g=_.revalidate!==!1;return l?(g&&(h(m)?x({_i:!0}):x({_i:!1})),arguments.length?O.mutate(m,{..._,revalidate:g}):O.mutate()):Ye},[l,o]),z=c.useCallback(m=>{if(!l)return Ye;const[,p]=ce(o,l);let _;if(Y(m)?_=m(d()):typeof m=="number"&&(_=m),typeof _!="number")return Ye;p({_l:_}),K.current=_;const g=[],[L]=ce(o,l);let M=null;for(let N=0;N<_;++N){const[P]=de(t(N,M)),[F]=ce(o,P),H=P?F().data:$;if(h(H))return A(L().data);g.push(H),M=H}return A(g)},[l,o,A,d]);return{size:d(),setSize:z,mutate:A,get data(){return O.data},get error(){return O.error},get isValidating(){return O.isValidating},get isLoading(){return O.isLoading}}},$s=Ds(ft,Bs);function Hs(e,t){if(!e)throw typeof t=="string"?new Error(t):new Error(`${t.displayName} not found`)}var ve=(e,t)=>{const{assertCtxFn:n=Hs}=t||{},s=y.createContext(void 0);return s.displayName=e,[s,()=>{const i=y.useContext(s);return n(i,`${e} not found`),i.value},()=>{const i=y.useContext(s);return i?i.value:{}}]},en={};rs(en,{SWRConfig:()=>Zt,useSWR:()=>ft,useSWRInfinite:()=>$s});os(en,zs);var[qs,Gs]=ve("ClerkInstanceContext"),[Vr,Ks]=ve("UserContext");ve("ClientContext");ve("SessionContext");ve("OrganizationContext");typeof window<"u"?y.useLayoutEffect:y.useEffect;const[zr,Ys]=[qs,Gs];function Qs(e){if(!e)throw new Error(us)}const Xs=Object.freeze({noGuarantees:Object.freeze({guaranteedLoaded:!1}),guaranteedLoaded:Object.freeze({guaranteedLoaded:!0})}),mt=y.createContext(void 0);mt.displayName="StructureContext";const Js=()=>{const e=y.useContext(mt);return Qs(e),e},Zs=({children:e})=>Js().guaranteedLoaded?y.createElement(y.Fragment,null,e):y.createElement(mt.Provider,{value:Xs.guaranteedLoaded},e),he=(e,t)=>{t=t||e.displayName||e.name||"Component",e.displayName=t;const n=s=>{const r=Ys();return r.loaded?y.createElement(Zs,null,y.createElement(e,{...s,clerk:r})):null};return n.displayName=`withClerk(${t})`,n},[Wr,tn]=ve("AuthContext");function nn(){const e=Ks();return e===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:e===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}const er=({children:e})=>{const{userId:t}=tn();return t?y.createElement(y.Fragment,null,e):null},tr=({children:e})=>{const{userId:t}=tn();return t===null?y.createElement(y.Fragment,null,e):null};he(({clerk:e,...t})=>{const{client:n,session:s}=e,{__unstable__environment:r}=e,o=n.activeSessions&&n.activeSessions.length>0;return y.useEffect(()=>{if(s===null&&o&&r){const{afterSignOutOneUrl:i}=r.displayConfig;e.navigate(i)}else e.redirectToSignIn(t)},[]),null},"RedirectToSignIn");he(({clerk:e,...t})=>(y.useEffect(()=>{e.redirectToSignUp(t)},[]),null),"RedirectToSignUp");he(({clerk:e})=>(y.useEffect(()=>{e.redirectToUserProfile()},[]),null),"RedirectToUserProfile");he(({clerk:e})=>(y.useEffect(()=>{e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");he(({clerk:e})=>(y.useEffect(()=>{e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");he(({clerk:e,...t})=>(y.useEffect(()=>{e.handleRedirectCallback(t)},[]),null),"AuthenticateWithRedirectCallback");const nr=he(({clerk:e,children:t,...n})=>{const{afterSignInUrl:s,afterSignUpUrl:r,redirectUrl:o,mode:i,...f}=n;t=ms(t,"Sign in");const u=fs(t)("SignInButton"),C=()=>{const l={afterSignInUrl:s,afterSignUpUrl:r,redirectUrl:o};return i==="modal"?e.openSignIn(l):e.redirectToSignIn(l)},b={...f,onClick:async l=>(await hs(u.props.onClick)(l),C())};return y.cloneElement(u,b)},"SignInButton"),sr=er,rr=tr;function or({className:e}){return a.jsx("i",{className:re("icon-[mingcute--send-plane-line]",e)})}const ar=()=>{const e=wn(),t=Mt();return a.jsxs("span",{className:re("font-mono text-[10px]",e?"text-red-500":"text-zinc-500"),children:[t.length,"/",Rn]})},ir=()=>{const e=Ce(),t=it(),n=ut(Fe().isWhisper),s=Ve();return e||t?null:a.jsxs("label",{className:"label mx-2 flex items-center",children:[a.jsx("input",{className:"checkbox-accent checkbox checkbox-sm mr-2",checked:n,type:"checkbox",onChange:r=>{const o=r.target.checked;s("isWhisper",o)}}),a.jsx("span",{className:"label-text text-sm",children:"悄悄话"})]})},cr=()=>{const e=Ce(),t=ut(Fe().syncToRecently),n=Ve(),s=it();return!e||s?null:a.jsxs("label",{className:"label mx-2 flex items-center",children:[a.jsx("input",{className:"checkbox-accent checkbox checkbox-sm mr-2",checked:t,type:"checkbox",onChange:r=>{const o=r.target.checked;n("syncToRecently",o)}}),a.jsx("span",{className:"label-text text-sm",children:"同步到碎碎念"})]})},ht=({className:e})=>{const t=Lt();return a.jsxs("footer",{className:Te("mt-3 flex h-5 w-full min-w-0 items-center justify-between",e),children:[a.jsxs("span",{className:re("flex-1 select-none text-[10px] text-zinc-500 transition-opacity"),children:[a.jsxs("span",{className:"hidden md:inline",children:["支持 ",a.jsx("b",{children:"Markdown"})," 与"," ",a.jsx(Pn,{href:"https://docs.github.com/zh/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax",children:"GFM"})]}),a.jsx(Cn,{})]}),a.jsx(Un,{children:t&&a.jsxs(De.aside,{initial:{opacity:0,scale:.96,y:8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:8},className:"flex select-none items-center gap-2.5",children:[a.jsx(ar,{}),a.jsx(ir,{}),a.jsx(cr,{}),a.jsx(lr,{})]},"send-button-wrapper")})]})},lr=()=>{const e=vn(),{text:t,author:n,mail:s,url:r,source:o,avatar:i,isWhisper:f,syncToRecently:u}=Fe(),{afterSubmit:C}=bn(),v=Ce(),b=Ft(),l=it(),E=En(),x=yn(),w=T=>(x==null||x(T),T),{mutate:I,isPending:d}=Zn({mutationFn:async T=>{const O=B.get(t),A=B.get(n),z=B.get(s),m=B.get(i),p=B.get(o),_=B.get(r),g={text:O,author:A,mail:z,avatar:m,source:p,url:_};if(v&&(delete g.source,delete g.avatar),Object.keys(g).forEach(N=>{g[N]===""&&delete g[N]}),l)return v?ye.comment.proxy.master.reply(T).post({data:{text:O}}).then(w):ye.comment.reply(T,g).then(w);const L=B.get(f),M=B.get(u);return v?ye.comment.proxy.master.comment(T).post({data:{text:O}}).then(async N=>(M&&ye.recently.proxy.post({data:{content:O,ref:T}}).then(()=>{He.success("已同步到碎碎念")}),N)).then(w):(g.isWhispers=L,ye.comment.comment(T,g).then(w))},mutationKey:[e,"comment"],onError(T){He.error(hn(T))},onSuccess(T){C==null||C();const O=v?"发表成功啦~":l?"感谢你的回复！":"感谢你的评论！",A=Sn(E);He.success(O),B.set(t,""),b.setQueryData(A,z=>z&&(l?Pe(z,m=>{const p=(g,L,M)=>{if(g.id===L)return g.children||(g.children=[]),g.children.push({...M,new:!0}),!0;if(g.children){for(const N of g.children)if(p(N,L,M))return!0;return!1}},_={...T,new:!0};for(const g of m.pages)for(const L of g.data)if(p(L,e,_))break}):Pe(z,m=>{m.pages[0].data.unshift({...T,new:!0})})))}}),K=()=>{I(e)};return a.jsxs(De.button,{className:"flex appearance-none items-center space-x-1 disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",disabled:d,onClick:K,children:[a.jsx(or,{className:"h-5 w-5 text-zinc-800 dark:text-zinc-200"}),a.jsx(De.span,{className:"text-sm",layout:"size",children:d?"送信...":"送信"})]})},ur=()=>{const e="bg-gray-200/50 dark:bg-zinc-800/50";return a.jsxs("div",{className:"flex animate-pulse gap-4",children:[a.jsx("div",{className:re("h-12 w-12 self-end overflow-hidden rounded-full",e)}),a.jsx("div",{className:re("h-[150px] w-full rounded-lg",e)})]})},sn=c.forwardRef((e,t)=>{const{className:n,children:s,...r}=e,o=Ze(0),i=Ze(0),f=c.useCallback(({clientX:b,clientY:l,currentTarget:E})=>{const x=E.getBoundingClientRect();o.set(b-x.left),i.set(l-x.top)},[o,i]),u=Xn`radial-gradient(320px circle at ${o}px ${i}px, var(--spotlight-color) 0%, transparent 85%)`,C=pn(),v=kn(e);return a.jsxs("div",{className:"group relative h-full [--spotlight-color:hsl(var(--a)_/_0.05)]",onMouseMove:f,children:[!C&&a.jsx(De.div,{className:"pointer-events-none absolute left-0 right-0 top-0 z-0 h-[150px] rounded-xl opacity-0 transition-opacity duration-500 group-hover:opacity-100",style:{background:u},"aria-hidden":"true"}),a.jsx("textarea",{ref:t,className:Te("h-full w-full resize-none bg-transparent","overflow-auto px-3 py-4","text-neutral-900/80 dark:text-slate-100/80",n),...r,...v}),s]})});sn.displayName="TextArea";const dr=Dn(()=>mn(()=>import("./EmojiPicker-ff332c64.js"),["./EmojiPicker-ff332c64.js","./index-68e81e95.js","./index-a4596dac.css","./Markdown-eb212eb4.js","./helper-cbdea6f1.js","./spring-608151cc.js","./index-94d83f10.js","./LinkCard.module-80ef03c5.js","./Divider-9716d436.js","./env-d87a2338.js","./LinkCard-9f7545ba.css","./Collapse-ec50c151.js","./Gallery-f373ff03.js","./Gallery-554db201.css","./RichLink-85e50391.js","./Markdown-13ecfc78.css"],import.meta.url).then(e=>e.EmojiPicker)),pt=()=>{const e=Je(()=>jn()),t=Ve(),n=Mt(),s=c.useRef(null),r=c.useCallback(o=>{if(!s.current)return;const i=s.current,f=i.selectionStart,u=i.selectionEnd;i.value=`${i.value.substring(0,f)} ${o} ${i.value.substring(u,i.value.length)}`,t("text",i.value),requestAnimationFrame(()=>{const C=f+o.length+2;i.selectionStart=C,i.selectionEnd=C,i.focus()})},[]);return c.useEffect(()=>{const o=s.current;o&&n!==o.value&&(o.value=n)},[n]),c.useLayoutEffect(()=>{const o=s.current;o&&(o.selectionStart=o.selectionEnd=o.value.length,o.focus())},[]),a.jsx(sn,{ref:s,defaultValue:n,onChange:o=>t("text",o.target.value),placeholder:e,children:a.jsx(_n,{children:a.jsx(Vt,{trigger:"click",TriggerComponent:fr,headless:!0,children:a.jsx(dr,{onEmojiSelect:r})})})})},fr=()=>a.jsxs("button",{className:"ml-0 inline-flex h-5 w-5 translate-y-1 text-base center md:ml-4",onClick:gn,children:[a.jsx("i",{className:"icon-[mingcute--emoji-2-line]"}),a.jsx("span",{className:"sr-only",children:"表情"})]}),mr=()=>{const{user:e}=nn(),t=Ve(),n=e?e.fullName||e.lastName||e.firstName||"Anonymous":"";return c.useEffect(()=>{var s;e&&(t("author",n),t("avatar",e.profileImageUrl),t("mail",((s=e.primaryEmailAddress)==null?void 0:s.emailAddress)||""))},[n,e]),e?a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("div",{className:re("mb-2 flex-shrink-0 select-none self-end overflow-hidden rounded-full",'dark:ring-zinc-800" bg-zinc-200 ring-2 ring-zinc-200 dark:bg-zinc-800',"ml-[2px] backface-hidden"),children:a.jsx(Pt,{className:"rounded-full object-cover",src:e.profileImageUrl,alt:`${n}'s avatar`,width:48,height:48})}),a.jsx("div",{className:"relative h-[150px] w-full rounded-lg bg-gray-200/50 pb-5 dark:bg-zinc-800/50",children:a.jsx(pt,{})}),a.jsx(ht,{className:"absolute bottom-0 left-12 right-0 mb-2 ml-4 w-auto px-4"})]}):a.jsx(ur,{})};zt({});const rn=c.createContext(null),on=c.createContext(null),an=()=>c.useContext(rn),hr=()=>c.useContext(on),pr=e=>{const{showErrorMessage:t=!0,...n}=e,s=Je(()=>zt({}));return a.jsx(rn.Provider,{value:Je(()=>({showErrorMessage:t,fields:s,getField:r=>B.get(s)[r],addField:(r,o)=>{B.set(s,i=>({...i,[r]:o}))},removeField:r=>{B.set(s,o=>{const i={...o};return delete i[r],i})}})),children:a.jsx(on.Provider,{value:c.useMemo(()=>({showErrorMessage:t}),[t]),children:a.jsx(gr,{...n})})})},gr=e=>{const{onSubmit:t,...n}=e,s=an().fields,r=c.useCallback(async o=>{o.preventDefault();const i=B.get(s);for await(const[f,u]of Object.entries(i)){const C=u.$ref;if(!C)continue;const v=C.value,b=u.rules;for(let l=0;l<b.length;l++){const E=b[l];try{if(!await E.validator(v)){console.error(`Form validation failed, at field \`${f}\`, got value \`${v}\``),C.focus(),E.message&&B.set(s,w=>Pe(w,I=>{I[f].rules[l].status="error"}));return}}catch(x){console.error("validate function throw error",x);return}}}t==null||t(o)},[t]);return a.jsx("form",{onSubmit:r,...n,children:e.children})},cn=c.memo(({className:e,rules:t,onKeyDown:n,...s})=>{const r=an();if(!r)throw new Error("FormInput must be used inside <FormContext />");const{showErrorMessage:o}=hr(),{addField:i,removeField:f,fields:u}=r,C=c.useRef(null),v=ut(zn(u,c.useCallback(l=>{var E,x;if(s.name)return(x=(E=l[s.name])==null?void 0:E.rules.find(w=>w.status==="error"))==null?void 0:x.message},[s.name])));c.useEffect(()=>{const l=s.name;if(t&&l)return i(l,{rules:t,$ref:C.current}),()=>{f(l)}},[s.name,t]);const b=c.useCallback(l=>{n&&n(l),B.set(u,E=>Pe(E,x=>{s.name&&x[s.name].rules.forEach(w=>{w.status==="error"&&(w.status="success")})}))},[u,n,s.name]);return a.jsxs(a.Fragment,{children:[a.jsx(Nn,{ref:C,className:Te(!!v&&"ring-2 ring-red-400 dark:ring-orange-700","w-full",e),type:"text",onKeyDown:b,...s}),o&&a.jsx(lt,{duration:.2,children:a.jsx("p",{className:"text-left text-sm text-red-400 dark:text-orange-700",children:v})})]})});cn.displayName="FormInput";const xr=()=>Ce()?a.jsx(br,{}):a.jsx(vr,{}),ln="relative h-[150px] w-full rounded-lg bg-gray-200/50 pb-5 dark:bg-zinc-800/50",Cr={author:"昵称",mail:"邮箱",url:"网址"},Qe=e=>{const{fieldKey:t,required:n}=e,[s,r]=Wn(Fe()[t]);return a.jsx(cn,{type:"text",value:s,onChange:o=>r(o.target.value),required:n,placeholder:Cr[t]+(n?" *":""),className:"border-0 bg-gray-200/50 dark:bg-zinc-800/50"})},vr=()=>a.jsxs(pr,{className:"flex flex-col space-y-4 px-2 pt-2",showErrorMessage:!1,children:[a.jsxs("div",{className:"flex flex-col space-x-0 space-y-4 md:flex-row md:space-x-4 md:space-y-0",children:[a.jsx(Qe,{fieldKey:"author",required:!0}),a.jsx(Qe,{fieldKey:"mail",required:!0}),a.jsx(Qe,{fieldKey:"url"})]}),a.jsx("div",{className:Te(ln,"pb-8"),children:a.jsx(pt,{})}),a.jsx(ht,{className:"absolute bottom-4 left-0 right-4 mb-2 ml-4 w-auto px-4"})]}),br=()=>{const e=xn(t=>t.user);return a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("div",{className:re("mb-2 flex-shrink-0 select-none self-end overflow-hidden rounded-full",'dark:ring-zinc-800" bg-zinc-200 ring-2 ring-zinc-200 dark:bg-zinc-800',"ml-[2px] backface-hidden"),children:a.jsx(Pt,{className:"rounded-full object-cover",src:e.avatar,alt:`${e.name||e.username}'s avatar`,width:48,height:48})}),a.jsx("div",{className:ln,children:a.jsx(pt,{})}),a.jsx(ht,{className:"absolute bottom-0 left-12 right-0 mb-2 ml-4 w-auto px-4"})]})};function Er(e){return a.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:a.jsx("path",{d:"M11 15H7C4.79086 15 3 16.7909 3 19C3 20.1046 3.89543 21 5 21H15M16.8744 13C16.2164 13.4935 15.6221 14.066 15.1049 14.7043C15.035 14.7906 15 14.8953 15 15M16.8744 17C16.2164 16.5065 15.6221 15.934 15.1049 15.2957C15.035 15.2094 15 15.1047 15 15M15 15H21M15 7C15 9.20914 13.2091 11 11 11C8.79086 11 7 9.20914 7 7C7 4.79086 8.79086 3 11 3C13.2091 3 15 4.79086 15 7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function yr(){const e=Fn();return a.jsxs("div",{className:"flex h-[150px] w-full space-x-4 rounded-lg bg-gray-100/80 center dark:bg-zinc-900/80",children:[a.jsx(St,{variant:"secondary",type:"button",onClick:()=>{ct(X.legacy)},children:"免登录评论"}),a.jsx(nr,{mode:"modal",redirectUrl:In(e).href,children:a.jsxs(St,{variant:"primary",type:"button",children:[a.jsx(Er,{className:"mr-1 h-5 w-5"}),"登录后才可以留言噢"]})})]})}const wr=()=>{const e=Xe(),t=`转换到${e===X.legacy?"新":"旧"}版评论`,n=Lt(),s=!!nn(),r=c.useRef(function(){const f=Xe();return a.jsxs(a.Fragment,{children:[a.jsx("i",{className:re(f===X.legacy?"icon-[mingcute--user-4-line]":"icon-[material-symbols--dynamic-form-outline]")}),a.jsx("span",{className:"sr-only",children:t})]})}).current;return Ce()?null:a.jsx(Yn,{className:re("absolute left-0 top-0 z-10 rounded-full text-sm","h-6 w-6 border border-slate-200 dark:border-neutral-800","bg-slate-100 dark:bg-neutral-900","flex cursor-pointer text-base-100/50 center","text-base-content/50","opacity-0 transition-opacity duration-200 group-[:hover]:opacity-100",e===X.legacy&&"bottom-0 top-auto",n||s&&e===X["with-auth"]&&"invisible opacity-0"),onClick:()=>{ct(e===X.legacy?X["with-auth"]:X.legacy)},children:a.jsx(Vt,{TriggerComponent:r,children:t})})},Ur=e=>{const{refId:t,className:n,afterSubmit:s,initialValue:r}=e,o=Xe(),i=Ce();return c.useEffect(()=>{i&&ct(X.legacy)},[i]),a.jsx(Tn,{children:a.jsx(On,{refId:t,afterSubmit:s,initialValue:r,children:a.jsxs("div",{className:Te("group relative w-full min-w-0",n),"data-hide-print":!0,children:[a.jsx(wr,{}),a.jsx("div",{className:"relative w-full",children:o===X.legacy?a.jsx(Rr,{}):a.jsx(Sr,{})})]})})})},Rr=()=>a.jsx(lt,{children:a.jsx(xr,{})}),Sr=()=>a.jsxs(lt,{children:[a.jsx(rr,{children:a.jsx(yr,{})}),a.jsx(sr,{children:a.jsx(mr,{})})]});export{Ur as C};
