import{r as u,j as l,_ as k,c as pe,g as je}from"./index-nz_GG-pC.js";import{o as W,i as Ae,$ as Ye,h as ke,D as Le,j as Te,l as Ne,e as v,c as S,m as Fe}from"./LinkCard-L8UZlc8f.js";import{a as p,e as se,u as ae,s as Ee,g as $e,j as Oe}from"./Divider-IpVeo7fM.js";import{c as Re}from"./Gallery-GXT5wvBV.js";import{A as ye}from"./Collapse-bbVyETR-.js";import{m as L,d as Ie,b as He}from"./spring-ydjtokqJ.js";import{d as T,b as Be}from"./Markdown-ckDvRH2K.js";import{c as N}from"./helper-Oi49T1hx.js";import{d as qe}from"./customParseFormat-E_j785bu.js";var he=Symbol.for("immer-nothing"),ce=Symbol.for("immer-draftable"),f=Symbol.for("immer-state");function _(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var P=Object.getPrototypeOf;function D(e){return!!e&&!!e[f]}function g(e){var t;return e?ge(e)||Array.isArray(e)||!!e[ce]||!!((t=e.constructor)!=null&&t[ce])||E(e)||$(e):!1}var Ge=Object.prototype.constructor.toString();function ge(e){if(!e||typeof e!="object")return!1;const t=P(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Ge}function z(e,t){F(e)===0?Object.entries(e).forEach(([r,n])=>{t(r,n,e)}):e.forEach((r,n)=>t(n,r,e))}function F(e){const t=e[f];return t?t.type_:Array.isArray(e)?1:E(e)?2:$(e)?3:0}function V(e,t){return F(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function xe(e,t,r){const n=F(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Ue(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function E(e){return e instanceof Map}function $(e){return e instanceof Set}function h(e){return e.copy_||e.base_}function Q(e,t){if(E(e))return new Map(e);if($(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&ge(e))return P(e)?{...e}:Object.assign(Object.create(null),e);const r=Object.getOwnPropertyDescriptors(e);delete r[f];let n=Reflect.ownKeys(r);for(let o=0;o<n.length;o++){const s=n[o],i=r[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(r[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[s]})}return Object.create(P(e),r)}function te(e,t=!1){return O(e)||D(e)||!g(e)||(F(e)>1&&(e.set=e.add=e.clear=e.delete=Ke),Object.freeze(e),t&&z(e,(r,n)=>te(n,!0))),e}function Ke(){_(2)}function O(e){return Object.isFrozen(e)}var We={};function x(e){const t=We[e];return t||_(0,e),t}var C;function be(){return C}function Ve(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function le(e,t){t&&(x("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function X(e){Z(e),e.drafts_.forEach(Qe),e.drafts_=null}function Z(e){e===C&&(C=e.parent_)}function ue(e){return C=Ve(C,e)}function Qe(e){const t=e[f];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function de(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[f].modified_&&(X(t),_(4)),g(e)&&(e=A(t,e),t.parent_||Y(t,e)),t.patches_&&x("Patches").generateReplacementPatches_(r[f].base_,e,t.patches_,t.inversePatches_)):e=A(t,r,[]),X(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==he?e:void 0}function A(e,t,r){if(O(t))return t;const n=t[f];if(!n)return z(t,(o,s)=>fe(e,n,t,o,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Y(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const o=n.copy_;let s=o,i=!1;n.type_===3&&(s=new Set(o),o.clear(),i=!0),z(s,(a,c)=>fe(e,n,o,a,c,r,i)),Y(e,o,!1),r&&e.patches_&&x("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function fe(e,t,r,n,o,s,i){if(D(o)){const a=s&&t&&t.type_!==3&&!V(t.assigned_,n)?s.concat(n):void 0,c=A(e,o,a);if(xe(r,n,c),D(c))e.canAutoFreeze_=!1;else return}else i&&r.add(o);if(g(o)&&!O(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;A(e,o),(!t||!t.scope_.parent_)&&Y(e,o)}}function Y(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&te(t,r)}function Xe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:be(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=n,s=re;r&&(o=[n],s=j);const{revoke:i,proxy:a}=Proxy.revocable(o,s);return n.draft_=a,n.revoke_=i,a}var re={get(e,t){if(t===f)return e;const r=h(e);if(!V(r,t))return Ze(e,r,t);const n=r[t];return e.finalized_||!g(n)?n:n===G(e.base_,t)?(U(e),e.copy_[t]=ee(n,e)):n},has(e,t){return t in h(e)},ownKeys(e){return Reflect.ownKeys(h(e))},set(e,t,r){const n=Me(h(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const o=G(h(e),t),s=o==null?void 0:o[f];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Ue(r,o)&&(r!==void 0||V(e.base_,t)))return!0;U(e),J(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return G(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,U(e),J(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=h(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){_(11)},getPrototypeOf(e){return P(e.base_)},setPrototypeOf(){_(12)}},j={};z(re,(e,t)=>{j[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});j.deleteProperty=function(e,t){return j.set.call(this,e,t,void 0)};j.set=function(e,t,r){return re.set.call(this,e[0],t,r,e[0])};function G(e,t){const r=e[f];return(r?h(r):e)[t]}function Ze(e,t,r){var o;const n=Me(t,r);return n?"value"in n?n.value:(o=n.get)==null?void 0:o.call(e.draft_):void 0}function Me(e,t){if(!(t in e))return;let r=P(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=P(r)}}function J(e){e.modified_||(e.modified_=!0,e.parent_&&J(e.parent_))}function U(e){e.copy_||(e.copy_=Q(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Je=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(c=s,...d){return i.produce(c,b=>r.call(this,b,...d))}}typeof r!="function"&&_(6),n!==void 0&&typeof n!="function"&&_(7);let o;if(g(t)){const s=ue(this),i=ee(t,void 0);let a=!0;try{o=r(i),a=!1}finally{a?X(s):Z(s)}return le(s,n),de(o,s)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===he&&(o=void 0),this.autoFreeze_&&te(o,!0),n){const s=[],i=[];x("Patches").generateReplacementPatches_(t,o,s,i),n(s,i)}return o}else _(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...a)=>this.produceWithPatches(i,c=>t(c,...a));let n,o;return[this.produce(t,r,(i,a)=>{n=i,o=a}),n,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){g(e)||_(8),D(e)&&(e=et(e));const t=ue(this),r=ee(e,void 0);return r[f].isManual_=!0,Z(t),r}finishDraft(e,t){const r=e&&e[f];(!r||!r.isManual_)&&_(9);const{scope_:n}=r;return le(n,t),de(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));const n=x("Patches").applyPatches_;return D(e)?n(e,t):this.produce(e,o=>n(o,t))}};function ee(e,t){const r=E(e)?x("MapSet").proxyMap_(e,t):$(e)?x("MapSet").proxySet_(e,t):Xe(e,t);return(t?t.scope_:be()).drafts_.push(r),r}function et(e){return D(e)||_(10,e),Pe(e)}function Pe(e){if(!g(e)||O(e))return e;const t=e[f];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Q(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Q(e,!0);return z(r,(n,o)=>{xe(r,n,Pe(o))}),t&&(t.finalized_=!1),r}var m=new Je,tt=m.produce;m.produceWithPatches.bind(m);m.setAutoFreeze.bind(m);m.setUseStrictShallowCopy.bind(m);m.applyPatches.bind(m);m.createDraft.bind(m);m.finishDraft.bind(m);let rt=Object.freeze([]),nt=e=>{let t=u.useRef(!1);!t.current&&(t.current=!0,e==null||e())},De=()=>{var e;let t=u.createContext(null),r=p(null),n=u.memo(o=>{var s;let{data:i,children:a}=o,c=(s=u.useContext(t))!==null&&s!==void 0?s:r,d=se(c);return nt(()=>{d(i)}),u.useEffect(()=>{d(i)},[i]),u.useEffect(()=>(d(i),()=>{d(null)}),[]),a});return n.displayName="ModelDataProvider",{ModelDataAtomProvider:o=>{let{children:s,overrideAtom:i}=o;return l.jsx(t.Provider,{value:i??r,children:s})},ModelDataProvider:n,useModelDataSelector:(o,s)=>{var i;let a=(i=u.useContext(t))!==null&&i!==void 0?i:r,c=u.useCallback(d=>d?o(d):null,s||rt);return ae(Ee(a,c))},useSetModelData:()=>se((e=u.useContext(t))!==null&&e!==void 0?e:r),useGetModelData:()=>{var o;let s=(o=u.useContext(t))!==null&&o!==void 0?o:r,i=$e();return()=>i.get(s)},useModelData:()=>{var o;return ae((o=u.useContext(t))!==null&&o!==void 0?o:r)},setGlobalModelData:o=>{let s=W();s.set(r,tt(s.get(r),o))},getGlobalModelData:()=>W().get(r),ModelDataAtomContext:t}},me=W();me.get,me.set;function Lt(e){return l.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:l.jsx("path",{fill:"currentColor",d:"M12 20a8 8 0 0 0 8-8a8 8 0 0 0-8-8a8 8 0 0 0-8 8a8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10a10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67l-.75 1.23L11 13V7h1.5Z"})})}const ve=p(""),we=p("");p("");p(!0);p(e=>{const t=e(ve),r=e(we);return t!==""&&r!==""});p(e=>{const t=e(ve),r=e(we);return t!==""&&r!==""});const ot=u.createContext(!1),Tt=e=>{const[t,r]=u.useState(!1),n=u.useRef(null);return u.useEffect(()=>{if(!n.current)return;const o=n.current;return o.oncopy=s=>{Ae()||(s.preventDefault(),r(!0))},()=>{o.oncopy=null}},[]),u.useEffect(()=>{if(t){const o=setTimeout(()=>{r(!1)},2e3);return()=>{clearTimeout(o)}}},[t]),l.jsxs(ot.Provider,{value:!0,children:[l.jsx("div",{ref:n,children:e.children}),l.jsx(Ye,{open:!0,children:l.jsx(ye,{children:t&&l.jsxs(ke,{children:[l.jsx(Le,{}),l.jsx(Te,{asChild:!0,children:l.jsxs(L.div,{className:"fixed inset-0 z-[11] flex flex-col gap-4 center",exit:{opacity:0},onClick:()=>{r(!1)},children:[l.jsx("div",{className:"pointer-events-none mt-0 text-3xl font-medium text-red-400 dark:text-orange-500",children:"注意："}),l.jsx("div",{className:"pointer-events-none my-3 text-lg text-neutral-900 text-opacity-80 dark:text-zinc-100",children:l.jsx("p",{children:"本文章为站长原创，保留版权所有，禁止复制。"})})]})})]})})})]})};T(()=>k(()=>import("./CommentRoot-G6ZbNl0f.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url).then(e=>e.CommentAreaRoot));T(()=>k(()=>import("./Comments-f9flAzb5.js").then(e=>e.q),__vite__mapDeps([12,1,2,13,7,8,9,5,6,10,11,14,15,16,17,18,19,20,21,22]),import.meta.url).then(e=>e.Comments));const Nt=T(()=>k(()=>import("./index-w98ghqqG.js"),__vite__mapDeps([25,3,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url).then(e=>e.CommentBoxRoot));var it={exports:{}};(function(e,t){(function(r,n){e.exports=n(Ne)})(pe,function(r){function n(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var o=n(r),s={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(i,a){return a==="W"?i+"周":i+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(i,a){var c=100*i+a;return c<600?"凌晨":c<900?"早上":c<1100?"上午":c<1300?"中午":c<1800?"下午":"晚上"}};return o.default.locale(s,null,!0),s})})(it);var Se={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(pe,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,o,s){var i=o.prototype,a=i.format;s.en.formats=r,i.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,b=function(H,w){return H.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(oe,B,M){var q=M&&M.toUpperCase();return B||w[M]||r[M]||w[q].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ie,ze,Ce){return ze||Ce.slice(1)})})}(c,d===void 0?{}:d);return a.call(this,b)}}})})(Se);var st=Se.exports;const at=je(st);v.extend(qe);v.extend(at);v.locale("zh-cn");const ct=(e,t)=>v(e).format(t),K=(e,t=new Date)=>{if(!e)return"";e=new Date(e);const r=60*1e3,n=r*60,o=n*24,s=o*30,i=o*365,a=+t-+e;if(a<r){const c=Math.ceil(a/1e3);return c<=0?"刚刚":`${c} 秒前`}else return a<n?`${Math.round(a/r)} 分钟前`:a<o?`${Math.round(a/n)} 小时前`:a<s?`${Math.round(a/o)} 天前`:a<i?`${Math.round(a/s)} 个月前`:`${Math.round(a/i)} 年前`},R=e=>e,lt={root:()=>R({queryKey:["aggregation"],queryFn:async()=>S.aggregate.getAggregateData("shiro").then(e=>e.$serialized),gcTime:1e3*60*10,meta:{forceHydration:!0},staleTime:Re?1e3*60*10:void 0})};var I=(e=>(e.Home="",e.Posts="/posts",e.Post="/posts/",e.Notes="/notes",e.Note="/notes/",e.NoteTopics="/notes/topics",e.NoteTopic="/notes/topics/",e.Timelime="/timeline",e.Login="/login",e.Page="/",e.Categories="/categories",e.Category="/categories/",e.Projects="/projects",e.Project="/projects/",e.Says="/says",e.Friends="/friends",e.Thinking="/thinking",e.PageDeletd="/common/deleted",e))(I||{});function ne(e,t){let r=e;switch(e){case"/notes/":{r+=t.id,t.password&&(r+=`?password=${t.password}`);break}case"/posts/":{const n=t;r+=`${n.category}/${n.slug}`;break}case"/posts":{const n=t;r+=`?${new URLSearchParams(n).toString()}`;break}case"/timeline":{const n=t;r+=`?${new URLSearchParams(n).toString()}`;break}case"/notes/topics/":case"/categories/":case"/":{r+=t.slug;break}case"":{r="/";break}case"/projects/":{r+=t.id;break}}return r}const ut="latest",dt={byNid:(e,t)=>R({queryKey:["note",e],meta:{hydrationRoutePath:ne(I.Note,{id:e}),shouldHydration:r=>{const n=r==null?void 0:r.data;return!(n!=null&&n.secret?v(n==null?void 0:n.secret).isAfter(new Date):!1)}},queryFn:async({queryKey:r})=>{const[,n]=r;return n===ut?(await S.note.getLatest()).$serialized:{...await S.note.getNoteById(+r[1],t)}}})},ft={bySlug:e=>R({queryKey:["page",e],meta:{hydrationRoutePath:ne(I.Page,{slug:e})},queryFn:async({queryKey:t})=>{const[,r]=t;return(await S.page.getBySlug(r)).$serialized}})},mt={bySlug:(e,t)=>R({queryKey:["post",e,t],meta:{hydrationRoutePath:ne(I.Post,{category:e,slug:t})},queryFn:async({queryKey:r})=>{const[,n,o]=r;return(await S.post.getPost(n,o)).$serialized}})},Ft={aggregation:lt,note:dt,post:mt,page:ft},{ModelDataProvider:Et,ModelDataAtomProvider:$t,getGlobalModelData:Ot,setGlobalModelData:Rt,useModelDataSelector:It,useSetModelData:Ht}=De(),Bt=({children:e,className:t,as:r="main"})=>l.jsx(r,{className:N("relative bg-slate-50 dark:bg-zinc-900 md:col-start-1 lg:col-auto","-m-4 p-[2rem_1rem] md:m-0 lg:p-[30px_45px]","rounded-[0_6px_6px_0] border-zinc-200/70 shadow-sm dark:border-neutral-800 dark:shadow-[#333] lg:border","note-layout-main","min-w-0","print:!border-none print:!bg-transparent print:!shadow-none",t),children:e});function _t(e,t){const[r,n]=u.useState(e);return u.useEffect(()=>{const o=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(o)}},[e,t]),r}const qt=e=>{const{children:t}=e,r=_t(t,300);return l.jsx(ye,{mode:"popLayout",initial:!1,children:l.jsx(L.span,{initial:{opacity:0,y:-16},animate:{opacity:1,y:0},exit:{opacity:0,y:-16,position:"absolute"},transition:Ie,children:r},r)})};function pt(e=""){var t;return new URL(e,(t=Fe())==null?void 0:t.url.webUrl)}function yt(e){return y(e.title)&&y(e.slug)&&!y(e.order)}function ht(e){return y(e.title)&&y(e.slug)&&y(e.order)}function gt(e){return y(e.title)&&y(e.nid)}function xt(e){return yt(e)?e.category?`/posts/${e.category.slug}/${encodeURIComponent(e.slug)}`:(console.error("PostModel.category is missing!!!!!"),"#"):ht(e)?`/${e.slug}`:gt(e)?`/notes/${e.nid}`:"/"}function y(e){return e!=null}pt.build=xt;p({x:0,y:0});p(!1);T(()=>k(()=>import("./index-efMKo1YE.js"),__vite__mapDeps([26,1,2]),import.meta.url).then(e=>e.QRCodeSVG));const bt=e=>{const{onKeyDown:t,onCompositionStart:r,onCompositionEnd:n}=e,o=u.useRef(!1),s=u.useCallback(c=>{o.current=!0,r==null||r(c)},[r]),i=u.useCallback(c=>{o.current=!1,n==null||n(c)},[n]),a=u.useCallback(c=>{if(t==null||t(c),o.current){c.stopPropagation();return}},[t]);return{onCompositionEnd:i,onCompositionStart:s,onKeyDown:a}},Mt=u.forwardRef(({className:e,...t},r)=>{const n=bt(t);return l.jsx("input",{ref:r,className:N("min-w-0 flex-auto appearance-none rounded-lg border ring-accent/20 duration-200 sm:text-sm","bg-base-100 px-3 py-[calc(theme(spacing.2)-1px)] placeholder:text-zinc-400 focus:outline-none focus:ring-2","border-zinc-900/10 dark:border-zinc-700","focus:border-accent-focus dark:bg-zinc-700/[0.15] dark:text-zinc-200 dark:placeholder:text-zinc-500",t.type==="password"?"font-mono":"font-[system-ui]",e),...t,...n})});Mt.displayName="Input";const Pt=p(!1),Dt=()=>Oe.get(Pt),Gt=e=>{const{from:t,to:r,initial:n,preset:o}=e,s=a=>{const{timeout:c={},duration:d=.5,animation:b={},as:H="div",delay:w=0,lcpOptimization:oe=!1,...B}=a,{enter:M=w,exit:q=w}=c,ie=L[H];return l.jsx(ie,{initial:u.useMemo(()=>oe?Dt()?n||t:!0:n||t,[]),animate:{...r,transition:{duration:d,...o||He,...b.enter,delay:M/1e3}},exit:{...t,transition:{duration:d,...b.exit,delay:q/1e3}},transition:{duration:d},...B,children:a.children})},i=u.memo(s);return i.displayName="MemoedTransitionView",i},Ut=e=>{const[t,r]=u.useState(K(e.date)),{displayAbsoluteTimeAfterDay:n=29}=e;return u.useEffect(()=>{r(K(e.date));let o=setInterval(()=>{r(K(e.date))},1e3);return Math.abs(v(e.date).diff(new Date,"d"))>n&&(o=clearInterval(o),r(ct(e.date,"YY 年 M 月 D 日"))),()=>{o=clearInterval(o)}},[e.date,n]),l.jsx(l.Fragment,{children:t})},{ModelDataProvider:Kt,ModelDataAtomProvider:Wt,getGlobalModelData:Vt,setGlobalModelData:Qt,useModelDataSelector:Xt}=De(),_e=({children:e,className:t,duration:r=.6})=>{const n=u.useRef(null),[o,s]=u.useState("auto");return u.useEffect(()=>{if(n.current){const i=new ResizeObserver(a=>{const c=a[0].contentRect.height;s(c)});return i.observe(n.current),()=>{i.disconnect()}}},[]),l.jsx(L.div,{className:N("overflow-hidden",t),style:{height:o},initial:!1,animate:{height:o},transition:{duration:r},children:l.jsx("div",{ref:n,children:e})})},Zt=e=>{const{cid:t}=e,{data:r,isLoading:n,error:o}=Be({queryKey:["getSummary",t],queryFn:async({queryKey:i})=>{const[,a]=i,c=await fetch(`/api/xlog/summary?cid=${a}`,{next:{revalidate:60*10}}).then(d=>d.json());if(!c)throw new Error("请求错误");if(!c.data)throw new Error("内容暂时无法获取");return c},enabled:!!t,staleTime:1e3*60*60*24*7,retryDelay:5e3});let s=l.jsxs("div",{className:N("space-y-2 rounded-xl border border-slate-200 p-4 dark:border-neutral-800",e.className),children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("i",{className:"icon-[mingcute--sparkles-line] mr-2 text-lg"}),"AI 生成的摘要"]}),l.jsxs(_e,{duration:.3,children:[l.jsx("div",{className:"text-base-content/85 !m-0 text-sm leading-loose",children:n?l.jsxs("div",{className:"space-y-2",children:[l.jsx("span",{className:"block h-5 w-full animate-pulse rounded-xl bg-zinc-200 dark:bg-neutral-800"}),l.jsx("span",{className:"block h-5 w-full animate-pulse rounded-xl bg-zinc-200 dark:bg-neutral-800"}),l.jsx("span",{className:"block h-5 w-full animate-pulse rounded-xl bg-zinc-200 dark:bg-neutral-800"})]}):r==null?void 0:r.data}),n&&l.jsxs("p",{className:"border-slate-200 text-right text-sm dark:border-slate-800 ",children:["(此服务由"," ",l.jsx("a",{href:"https://xlog.app",target:"_blank",rel:"noreferrer",children:"xLog"})," ","驱动)"]})]})]});return(!t||o)&&(s=null),l.jsx(_e,{duration:.2,className:"mt-4 print:hidden",children:s})},Jt=e=>{var t,r;return(r=(t=e==null?void 0:e.meta)==null?void 0:t.xLog)==null?void 0:r.cid};export{_e as A,Tt as B,Nt as C,Mt as I,Lt as M,qt as N,Bt as P,I as R,Zt as X,Ut as a,Wt as b,Gt as c,Kt as d,It as e,ct as f,Jt as g,$t as h,Et as i,bt as j,pt as k,tt as p,Ft as q,ne as r,Xt as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./CommentRoot-G6ZbNl0f.js","./index-nz_GG-pC.js","./index-6pVrHm1H.css","./Root-5IhiGVod.js","./index-uRbRQTVr.js","./LinkCard-L8UZlc8f.js","./Divider-IpVeo7fM.js","./helper-Oi49T1hx.js","./spring-ydjtokqJ.js","./index-iAcAeRlm.js","./env-jTYMx4r5.js","./LinkCard-TdGDteo_.css","./Comments-f9flAzb5.js","./Markdown-ckDvRH2K.js","./Collapse-bbVyETR-.js","./Gallery-GXT5wvBV.js","./Gallery-cCMf-PmV.css","./RichLink-IDSSwHBf.js","./Markdown-nufn1r_q.css","./infiniteQueryBehavior-u4nnm_1p.js","./FlexText-mQhw4IhO.js","./PinIconToggle-r8YatASg.js","./Comments-rnEXEs_g.css","./mutation-b11VZmVK.js","./customParseFormat-E_j785bu.js","./index-w98ghqqG.js","./index-efMKo1YE.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}